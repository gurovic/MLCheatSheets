<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è ML Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    .good-vs-bad {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .good-vs-bad div {
      flex: 1;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .good {
      background-color: #f0f9f4;
      border-left: 3px solid #2e8b57;
    }

    .bad {
      background-color: #fdf0f2;
      border-left: 3px solid #d32f2f;
    }

    .good h3, .bad h3 {
      margin: 0 0 4px;
      font-size: 1em;
      font-weight: 700;
    }

    .good ul, .bad ul {
      padding-left: 20px;
      margin: 0;
    }

    .good li::before { content: "‚úÖ "; font-weight: bold; }
    .bad li::before { content: "‚ùå "; font-weight: bold; }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è ML</h1>
  <div class="subtitle">Bootstrap ‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–∏–ø–æ—Ç–µ–∑<br>üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –≤ ML?</h2>
    <ul>
      <li><strong>–¶–µ–ª—å</strong>: –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π</li>
      <li><strong>Bootstrap</strong>: –æ—Ü–µ–Ω–∫–∞ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏</li>
      <li><strong>–¢–µ—Å—Ç—ã</strong>: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–∏–ø–æ—Ç–µ–∑ –æ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª—è—Ö</li>
      <li><strong>P-value</strong>: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</li>
      <li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –≤–∞–ª–∏–¥–∞—Ü–∏—è, feature selection, A/B —Ç–µ—Å—Ç—ã</li>
    </ul>
  </div>
  <div class="block">
    <h2>üî∑ 2. Bootstrap</h2>
    <pre><code>import numpy as np
from sklearn.utils import resample

# –î–∞–Ω–Ω—ã–µ
X = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])

# Bootstrap resampling
n_iterations = 1000
bootstrapped_means = []

for i in range(n_iterations):
    # Resample with replacement
    sample = resample(X, n_samples=len(X), random_state=i)
    bootstrapped_means.append(sample.mean())

# Confidence interval
ci_lower = np.percentile(bootstrapped_means, 2.5)
ci_upper = np.percentile(bootstrapped_means, 97.5)

print(f"Mean: {np.mean(X):.2f}")
print(f"95% CI: [{ci_lower:.2f}, {ci_upper:.2f}]")

# Bootstrap –¥–ª—è –º–æ–¥–µ–ª–∏
from sklearn.ensemble import RandomForestClassifier

def bootstrap_model(model, X, y, n_iterations=100):
    scores = []
    for i in range(n_iterations):
        X_boot, y_boot = resample(X, y, random_state=i)
        model.fit(X_boot, y_boot)
        score = model.score(X, y)
        scores.append(score)
    return scores

scores = bootstrap_model(RandomForestClassifier(), X_train, y_train)
print(f"Model score: {np.mean(scores):.3f} ¬± {np.std(scores):.3f}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 3. T-—Ç–µ—Å—Ç</h2>
    <pre><code>from scipy import stats

# –û–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–π t-—Ç–µ—Å—Ç
# H0: —Å—Ä–µ–¥–Ω–µ–µ = expected_mean
t_stat, p_value = stats.ttest_1samp(data, popmean=expected_mean)

# –î–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω—ã–π t-—Ç–µ—Å—Ç
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –≥—Ä—É–ø–ø
model_A_scores = [0.85, 0.87, 0.86, 0.88, 0.84]
model_B_scores = [0.90, 0.91, 0.89, 0.92, 0.90]

t_stat, p_value = stats.ttest_ind(model_A_scores, model_B_scores)
print(f"T-statistic: {t_stat:.3f}")
print(f"P-value: {p_value:.3f}")

if p_value < 0.05:
    print("–ú–æ–¥–µ–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã")
else:
    print("–ù–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π")

# Paired t-—Ç–µ—Å—Ç (–Ω–∞ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö)
# –ù–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ç–µ—Ö –∂–µ —Ñ–æ–ª–¥–∞—Ö
t_stat, p_value = stats.ttest_rel(model_A_scores, model_B_scores)
print(f"Paired t-test p-value: {p_value:.3f}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 4. Mann-Whitney U —Ç–µ—Å—Ç</h2>
    <p>–ù–µ–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–æ–≥ t-—Ç–µ—Å—Ç–∞:</p>
    <pre><code>from scipy.stats import mannwhitneyu

# –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
u_stat, p_value = mannwhitneyu(
    model_A_scores, 
    model_B_scores,
    alternative='two-sided'
)

print(f"U-statistic: {u_stat:.3f}")
print(f"P-value: {p_value:.3f}")

# Wilcoxon signed-rank test (–ø–∞—Ä–Ω—ã–π)
from scipy.stats import wilcoxon

w_stat, p_value = wilcoxon(model_A_scores, model_B_scores)
print(f"Wilcoxon p-value: {p_value:.3f}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 5. Chi-square —Ç–µ—Å—Ç</h2>
    <pre><code>from scipy.stats import chi2_contingency

# –¢–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
contingency_table = np.array([
    [25, 35],  # –≥—Ä—É–ø–ø–∞ A: success, fail
    [40, 20]   # –≥—Ä—É–ø–ø–∞ B: success, fail
])

chi2, p_value, dof, expected = chi2_contingency(contingency_table)

print(f"Chi2: {chi2:.3f}")
print(f"P-value: {p_value:.3f}")
print(f"Degrees of freedom: {dof}")

# Feature selection —Å chi2
from sklearn.feature_selection import chi2, SelectKBest

selector = SelectKBest(chi2, k=10)
X_selected = selector.fit_transform(X, y)
selected_features = selector.get_support(indices=True)
print(f"Selected features: {selected_features}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 6. ANOVA</h2>
    <pre><code>from scipy.stats import f_oneway

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–æ–ª–µ–µ –¥–≤—É—Ö –≥—Ä—É–ø–ø
model_A_scores = [0.85, 0.87, 0.86]
model_B_scores = [0.90, 0.91, 0.89]
model_C_scores = [0.88, 0.89, 0.87]

f_stat, p_value = f_oneway(
    model_A_scores,
    model_B_scores,
    model_C_scores
)

print(f"F-statistic: {f_stat:.3f}")
print(f"P-value: {p_value:.3f}")

# ANOVA –¥–ª—è feature selection
from sklearn.feature_selection import f_classif

f_values, p_values = f_classif(X, y)
print(f"F-values: {f_values}")
print(f"P-values: {p_values}")

# –í—ã–±–æ—Ä –∑–Ω–∞—á–∏–º—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
significant = p_values < 0.05
print(f"Significant features: {np.where(significant)[0]}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 7. McNemar's —Ç–µ—Å—Ç</h2>
    <p>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö:</p>
    <pre><code>from statsmodels.stats.contingency_tables import mcnemar

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π
y_pred_A = model_A.predict(X_test)
y_pred_B = model_B.predict(X_test)

# Contingency table
correct_A = (y_pred_A == y_test)
correct_B = (y_pred_B == y_test)

n_01 = np.sum(correct_A & ~correct_B)  # A right, B wrong
n_10 = np.sum(~correct_A & correct_B)  # A wrong, B right

table = np.array([[np.sum(correct_A & correct_B), n_01],
                  [n_10, np.sum(~correct_A & ~correct_B)]])

result = mcnemar(table, exact=True)
print(f"McNemar p-value: {result.pvalue:.3f}")

if result.pvalue < 0.05:
    print("–ú–æ–¥–µ–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 8. Permutation —Ç–µ—Å—Ç</h2>
    <pre><code>from sklearn.model_selection import permutation_test_score

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
model = RandomForestClassifier(n_estimators=100)

score, perm_scores, p_value = permutation_test_score(
    model, X, y,
    scoring='accuracy',
    cv=5,
    n_permutations=1000,
    random_state=42
)

print(f"Score: {score:.3f}")
print(f"P-value: {p_value:.3f}")
print(f"Mean permutation score: {perm_scores.mean():.3f}")

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
import matplotlib.pyplot as plt
plt.hist(perm_scores, bins=20, alpha=0.7)
plt.axvline(score, color='red', linestyle='--', label='Actual score')
plt.xlabel('Score')
plt.ylabel('Frequency')
plt.legend()
plt.show()</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 9. Multiple Testing Correction</h2>
    <pre><code>from statsmodels.stats.multitest import multipletests

# –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
p_values = [0.01, 0.04, 0.03, 0.05, 0.10, 0.02]

# Bonferroni correction
reject, p_corrected, _, _ = multipletests(
    p_values, 
    alpha=0.05, 
    method='bonferroni'
)

print(f"Bonferroni corrected: {p_corrected}")
print(f"Reject H0: {reject}")

# FDR (Benjamini-Hochberg)
reject, p_corrected, _, _ = multipletests(
    p_values,
    alpha=0.05,
    method='fdr_bh'
)

print(f"FDR corrected: {p_corrected}")
print(f"Reject H0: {reject}")</code></pre>
  </div>
  <div class="block">
    <h2>üî∑ 10. –ß–µ–∫-–ª–∏—Å—Ç</h2>
    <ul>
      <li>[ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–∏–ø–æ—Ç–µ–∑—É (H0 –∏ H1)</li>
      <li>[ ] –í—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–µ—Å—Ç</li>
      <li>[ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏ —Ç–µ—Å—Ç–∞</li>
      <li>[ ] –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ p-value</li>
      <li>[ ] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</li>
      <li>[ ] –£—á–µ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
      <li>[ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bootstrap –¥–ª—è CI</li>
    </ul>
    <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É:</h3>
    <blockquote>
      ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã ‚Äî —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –ª—É—á—à–µ –¥—Ä—É–≥–æ–π, –∏–ª–∏ —ç—Ç–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å?" –û–Ω–∏ –¥–∞—é—Ç –Ω–∞–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –≤—ã–≤–æ–¥–∞—Ö¬ª.
    </blockquote>
  </div>

</div>

</body>
</html>