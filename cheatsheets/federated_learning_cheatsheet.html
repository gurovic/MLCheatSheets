<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üåê Federated Learning Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    .good-vs-bad {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .good-vs-bad div {
      flex: 1;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .good {
      background-color: #f0f9f4;
      border-left: 3px solid #2e8b57;
    }

    .bad {
      background-color: #fdf0f2;
      border-left: 3px solid #d32f2f;
    }

    .good h3, .bad h3 {
      margin: 0 0 4px;
      font-size: 1em;
      font-weight: 700;
    }

    .good ul, .bad ul {
      padding-left: 20px;
      margin: 0;
    }

    .good li::before { content: "‚úÖ "; font-weight: bold; }
    .bad li::before { content: "‚ùå "; font-weight: bold; }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üåê Federated Learning</h1>
  <div class="subtitle">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Ä¢ Privacy ‚Ä¢ Edge Computing<br>üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Federated Learning?</h2>
    <ul>
      <li><strong>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</strong>: –æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö</li>
      <li><strong>–ò–¥–µ—è</strong>: –º–æ–¥–µ–ª—å –∫ –¥–∞–Ω–Ω—ã–º, –∞ –Ω–µ –¥–∞–Ω–Ω—ã–µ –∫ –º–æ–¥–µ–ª–∏</li>
      <li><strong>Privacy</strong>: –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</li>
      <li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –º–µ–¥–∏—Ü–∏–Ω–∞, IoT</li>
      <li><strong>–ü—Ä–∏–º–µ—Ä—ã</strong>: Google Gboard, Apple Siri</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ FL</h2>
    <p>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:</p>
    <ol>
      <li><strong>Central Server</strong>: –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –æ–±—É—á–µ–Ω–∏–µ</li>
      <li><strong>Clients</strong>: –ª–æ–∫–∞–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</li>
      <li><strong>Global Model</strong>: –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å</li>
      <li><strong>Local Models</strong>: –æ–±—É—á–∞—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞—Ö</li>
      <li><strong>Communication</strong>: –æ–±–º–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</li>
    </ol>
  </div>

  <div class="block">
    <h2>üî∑ 3. Federated Averaging (FedAvg)</h2>
    <pre><code>import numpy as np
from sklearn.linear_model import SGDClassifier

def federated_averaging(clients_data, n_rounds=10, 
                       local_epochs=5):
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
    global_model = SGDClassifier(warm_start=True)
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    X_init, y_init = clients_data[0]
    global_model.fit(X_init[:10], y_init[:10])
    
    for round_num in range(n_rounds):
        print(f"Round {round_num + 1}/{n_rounds}")
        
        # –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
        local_models = []
        sample_sizes = []
        
        for X_client, y_client in clients_data:
            # –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
            local_model = SGDClassifier(warm_start=True)
            local_model.coef_ = global_model.coef_.copy()
            local_model.intercept_ = global_model.intercept_.copy()
            local_model.classes_ = global_model.classes_
            
            # –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
            for epoch in range(local_epochs):
                local_model.partial_fit(
                    X_client, y_client, 
                    classes=np.unique(y_client)
                )
            
            local_models.append(local_model)
            sample_sizes.append(len(X_client))
        
        # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤–µ—Å–æ–≤ (weighted average)
        total_samples = sum(sample_sizes)
        global_weights = np.zeros_like(global_model.coef_)
        global_intercept = np.zeros_like(global_model.intercept_)
        
        for model, n_samples in zip(local_models, sample_sizes):
            weight = n_samples / total_samples
            global_weights += weight * model.coef_
            global_intercept += weight * model.intercept_
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
        global_model.coef_ = global_weights
        global_model.intercept_ = global_intercept
    
    return global_model</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 4. Flower Framework</h2>
    <pre><code># pip install flwr

import flwr as fl
from sklearn.linear_model import LogisticRegression

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
class FlowerClient(fl.client.NumPyClient):
    def __init__(self, X, y):
        self.X = X
        self.y = y
        self.model = LogisticRegression()
    
    def get_parameters(self, config):
        return [self.model.coef_, self.model.intercept_]
    
    def set_parameters(self, parameters):
        self.model.coef_ = parameters[0]
        self.model.intercept_ = parameters[1]
    
    def fit(self, parameters, config):
        self.set_parameters(parameters)
        self.model.fit(self.X, self.y)
        return self.get_parameters(config), len(self.X), {}
    
    def evaluate(self, parameters, config):
        self.set_parameters(parameters)
        loss = 1 - self.model.score(self.X, self.y)
        return loss, len(self.X), {"accuracy": self.model.score(self.X, self.y)}

# –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
fl.client.start_numpy_client(
    server_address="localhost:8080",
    client=FlowerClient(X_client, y_client)
)

# –°–µ—Ä–≤–µ—Ä
strategy = fl.server.strategy.FedAvg(
    min_available_clients=2,
    min_fit_clients=2
)

fl.server.start_server(
    server_address="0.0.0.0:8080",
    config=fl.server.ServerConfig(num_rounds=10),
    strategy=strategy
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 5. Differential Privacy</h2>
    <pre><code># –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à—É–º–∞ –¥–ª—è privacy
def add_gaussian_noise(params, noise_scale=0.1):
    noisy_params = []
    for param in params:
        noise = np.random.normal(0, noise_scale, param.shape)
        noisy_params.append(param + noise)
    return noisy_params

# –ö–ª–∏–ø–ø–∏–Ω–≥ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
def clip_gradients(gradients, max_norm=1.0):
    total_norm = np.sqrt(sum(np.sum(g**2) for g in gradients))
    clip_coef = max_norm / (total_norm + 1e-6)
    
    if clip_coef < 1:
        gradients = [g * clip_coef for g in gradients]
    
    return gradients

# FL —Å DP
def fedavg_with_dp(clients_data, n_rounds=10, 
                   noise_scale=0.1, clip_norm=1.0):
    global_model = SGDClassifier(warm_start=True)
    
    for round_num in range(n_rounds):
        local_updates = []
        
        for X_client, y_client in clients_data:
            local_model = train_local(X_client, y_client)
            
            # –í—ã—á–∏—Å–ª—è–µ–º update (—Ä–∞–∑–Ω–∏—Ü—É –≤–µ—Å–æ–≤)
            update = local_model.coef_ - global_model.coef_
            
            # –ö–ª–∏–ø–ø–∏–Ω–≥
            update_clipped = clip_gradients([update], clip_norm)[0]
            
            # –î–æ–±–∞–≤–ª—è–µ–º —à—É–º
            update_noisy = add_gaussian_noise([update_clipped], noise_scale)[0]
            
            local_updates.append(update_noisy)
        
        # –ê–≥—Ä–µ–≥–∞—Ü–∏—è
        avg_update = np.mean(local_updates, axis=0)
        global_model.coef_ += avg_update
    
    return global_model</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 6. –ü—Ä–æ–±–ª–µ–º—ã FL</h2>
    <table>
      <tr><th>–ü—Ä–æ–±–ª–µ–º–∞</th><th>–†–µ—à–µ–Ω–∏–µ</th></tr>
      <tr><td>Non-IID –¥–∞–Ω–Ω—ã–µ</td><td>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è, FedProx</td></tr>
      <tr><td>Communication overhead</td><td>Compression, quantization</td></tr>
      <tr><td>Stragglers</td><td>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</td></tr>
      <tr><td>Privacy leakage</td><td>Differential privacy, secure aggregation</td></tr>
      <tr><td>Model poisoning</td><td>Byzantine-robust aggregation</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 7. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h2>
    <pre><code># –õ–æ–∫–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
def personalized_fl(global_model, X_local, y_local, 
                   adaptation_steps=5):
    # –ö–æ–ø–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å
    personal_model = clone(global_model)
    
    # Fine-tune –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    for step in range(adaptation_steps):
        personal_model.partial_fit(X_local, y_local)
    
    return personal_model

# Interpolation –º–µ–∂–¥—É –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∏ –ª–æ–∫–∞–ª—å–Ω–æ–π
def interpolate_models(global_model, local_model, alpha=0.5):
    # alpha=0: –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–ª–æ–±–∞–ª—å–Ω–∞—è
    # alpha=1: –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è
    
    interpolated_weights = (
        alpha * local_model.coef_ + 
        (1 - alpha) * global_model.coef_
    )
    
    model = clone(global_model)
    model.coef_ = interpolated_weights
    return model</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FL</h2>
    <div class="good-vs-bad">
      <div class="good">
        <h3>‚úÖ –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç</h3>
        <ul>
          <li>–î–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã</li>
          <li>–ù–µ–ª—å–∑—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (GDPR)</li>
          <li>Edge computing / IoT</li>
          <li>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</li>
          <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</li>
        </ul>
      </div>
      <div class="bad">
        <h3>‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç</h3>
        <ul>
          <li>–î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å</li>
          <li>–ú–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤</li>
          <li>–°–∏–ª—å–Ω–æ non-IID –¥–∞–Ω–Ω—ã–µ</li>
          <li>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è</li>
          <li>–ù—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="block">
    <h2>üî∑ 9. –ß–µ–∫-–ª–∏—Å—Ç</h2>
    <ul>
      <li>[ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ</li>
      <li>[ ] –í—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</li>
      <li>[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å communication rounds</li>
      <li>[ ] –î–æ–±–∞–≤–∏—Ç—å privacy (DP)</li>
      <li>[ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å non-IID –¥–∞–Ω–Ω—ã–µ</li>
      <li>[ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å communication</li>
      <li>[ ] –û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</li>
      <li>[ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å convergence</li>
    </ul>

    <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É:</h3>
    <blockquote>
      ¬´Federated Learning ‚Äî —ç—Ç–æ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –≥–¥–µ –∫–∞–∂–¥—ã–π —É—á–∏—Ç—Å—è –Ω–∞ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω–æ, –∞ –∑–∞—Ç–µ–º –¥–µ–ª–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–Ω–∞–Ω–∏—è–º–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–æ–¥–µ–ª–∏), –Ω–æ –Ω–µ —Å–∞–º–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—É—á–∞—Ç—å –º–æ—â–Ω—ã–µ –º–æ–¥–µ–ª–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å¬ª.
    </blockquote>
  </div>

</div>

</body>
</html>