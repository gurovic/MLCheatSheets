<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–æ–¥–µ–ª—å–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen { body { font-family: -apple-system, BlinkMacSystemFont, '''Segoe UI''', Helvetica, Arial, sans-serif; color: #333; background: #fafcff; padding: 10px; 
        min-width: 900px;
      } }
    @media print { body { background: white; padding: 0; } @page { size: A4 landscape; margin: 10mm; } }
        .container {
      max-width: 100%;
    }

    /* Responsive columns: 3 columns on wide screens, fewer on narrow */
    @media (min-width: 900px) {
      .container {
        column-count: 3;
        column-gap: 20px;
      }
    }
    
    @media (min-width: 600px) and (max-width: 899px) {
      .container {
        column-count: 2;
        column-gap: 20px;
      }
    }
    
    @media (max-width: 599px) {
      .container {
        column-count: 1;
      }
    }
    .block { break-inside: avoid; margin-bottom: 1.2em; padding: 12px; background: white; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    h1 { font-size: 1.6em; font-weight: 700; color: #1a5fb4; text-align: center; margin: 0 0 8px; column-span: all; }
    .subtitle { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 12px; column-span: all; }
    h2 { font-size: 1.15em; font-weight: 700; color: #1a5fb4; margin: 0 0 8px; padding-bottom: 4px; border-bottom: 1px solid #e0e7ff; }
    p, ul, ol { font-size: 0.92em; margin: 0.6em 0; }
    ul, ol { padding-left: 18px; }
    li { margin-bottom: 4px; }
    code { font-family: '''Consolas''', '''Courier New''', monospace; background-color: #f0f4ff; padding: 1px 4px; border-radius: 3px; font-size: 0.88em; }
    pre { background-color: #f0f4ff; padding: 8px; border-radius: 4px; overflow-x: auto; font-size: 0.84em; margin: 6px 0; }
    pre code { padding: 0; background: none; white-space: pre-wrap; }
    blockquote { font-style: italic; margin: 8px 0; padding: 6px 10px; background: #f8fbff; border-left: 2px solid #1a5fb4; font-size: 0.88em; }
    table { width: 100%; border-collapse: collapse; font-size: 0.88em; margin: 6px 0; }
    th, td { padding: 6px 8px; text-align: left; border: 1px solid #e0e7ff; }
    th { background-color: #1a5fb4; color: white; font-weight: 700; }
    tr:nth-child(even) { background-color: #f8fbff; }
    @media print { .container { column-gap: 12px; } .block { box-shadow: none; } code, pre { font-size: 0.78em; } h1 { font-size: 1.4em; } h2 { font-size: 1em; } }
  </style>
</head>
<body>
<div class="container">
  <h1>üìö –ú–æ–¥–µ–ª—å–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã</h1>
  <div class="subtitle">üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –û—Å–Ω–æ–≤—ã –º–æ–¥–µ–ª—å–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–æ–≤</h2>
    <p><strong>Model Registry</strong>: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ML –º–æ–¥–µ–ª—è–º–∏</p>
    <ul>
      <li><strong>–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π –º–æ–¥–µ–ª–µ–π</li>
      <li><strong>–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ</strong>: –º–µ—Ç—Ä–∏–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã</li>
      <li><strong>–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª</strong>: staging, production, archived</li>
      <li><strong>Lineage</strong>: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è</li>
      <li><strong>Collaboration</strong>: —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥—ã</li>
    </ul>
    <blockquote>üí° Model Registry - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å MLOps –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</blockquote>

    </div>
<div class="block">
    <h2>üî∑ 2. MLflow Model Registry</h2>
    <pre><code>import mlflow
from mlflow.tracking import MlflowClient

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
with mlflow.start_run() as run:
    mlflow.sklearn.log_model(
        model,
        "model",
        registered_model_name="my_model"
    )

# –†–∞–±–æ—Ç–∞ —Å Registry
client = MlflowClient()

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ registered model
client.create_registered_model(
    "my_model",
    tags={"task": "classification"},
    description="My classification model"
)

# –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏
client.transition_model_version_stage(
    name="my_model",
    version=1,
    stage="Production"
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π</h2>
    <pre><code># –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
result = mlflow.register_model(
    model_uri=f"runs:/{run_id}/model",
    name="my_model"
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ latest version
latest_version = client.get_latest_versions(
    "my_model",
    stages=["Production"]
)[0]

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –ø–æ –≤–µ—Ä—Å–∏–∏
model = mlflow.pyfunc.load_model(
    f"models:/my_model/{latest_version.version}"
)

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –ø–æ stage
model = mlflow.pyfunc.load_model(
    "models:/my_model/Production"
)

# –û–ø–∏—Å–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
client.update_model_version(
    name="my_model",
    version=1,
    description="Best model from experiment X"
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 4. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–æ–¥–µ–ª–∏</h2>
    <table>
      <tr><th>Stage</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</th></tr>
      <tr><td>None</td><td>–¢–æ–ª—å–∫–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞</td><td>–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</td></tr>
      <tr><td>Staging</td><td>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</td><td>Pre-production tests</td></tr>
      <tr><td>Production</td><td>–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</td><td>–ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</td></tr>
      <tr><td>Archived</td><td>–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞</td><td>–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–æ–¥–µ–ª–∏</td></tr>
    </table>
    <pre><code># –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏
client.transition_model_version_stage(
    name="my_model",
    version=2,
    stage="Staging",
    archive_existing_versions=False
)

# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
client.transition_model_version_stage(
    name="my_model",
    version=1,
    stage="Archived"
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 5. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Ç–µ–≥–∏</h2>
    <pre><code># –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∫ –º–æ–¥–µ–ª–∏
client.set_registered_model_tag(
    "my_model",
    "task",
    "classification"
)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∫ –≤–µ—Ä—Å–∏–∏
client.set_model_version_tag(
    "my_model",
    version="1",
    key="validation_accuracy",
    value="0.95"
)

# –ü–æ–∏—Å–∫ –º–æ–¥–µ–ª–µ–π –ø–æ —Ç–µ–≥–∞–º
models = client.search_registered_models(
    filter_string="tags.task = '''classification'''"
)

# –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
client.delete_registered_model_tag(
    "my_model",
    "old_tag"
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 6. Model Registry –≤ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö</h2>
    <p><strong>W&B Model Registry</strong>:</p>
    <pre><code>import wandb

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
run = wandb.init(project="my-project")
wandb.log_model(
    path="./model.pkl",
    name="my-model",
    aliases=["latest", "production"]
)

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
artifact = wandb.use_artifact(
    "my-model:production",
    type="model"
)
model_path = artifact.download()</code></pre>
    <p><strong>Neptune.ai</strong>:</p>
    <pre><code>import neptune

run = neptune.init_run()
run["model"].upload("model.pkl")
run["model/signature"].upload_files("signature.json")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 7. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è workflow</h2>
    <pre><code># –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
def promote_best_model(experiment_id, metric="accuracy"):
    runs = mlflow.search_runs(
        experiment_ids=[experiment_id],
        order_by=[f"metrics.{metric} DESC"],
        max_results=1
    )
    
    best_run_id = runs.iloc[0].run_id
    model_uri = f"runs:/{best_run_id}/model"
    
    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    result = mlflow.register_model(
        model_uri,
        "my_model"
    )
    
    # –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ Production
    client.transition_model_version_stage(
        "my_model",
        result.version,
        "Production",
        archive_existing_versions=True
    )
    
    return result.version

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
new_version = promote_best_model("exp123", "f1_score")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. Webhooks –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
    <pre><code># MLflow webhooks –¥–ª—è —Å–æ–±—ã—Ç–∏–π
{
  "model_name": "my_model",
  "events": [
    "MODEL_VERSION_CREATED",
    "MODEL_VERSION_TRANSITIONED_STAGE",
    "REGISTERED_MODEL_CREATED"
  ],
  "http_url_spec": {
    "url": "https://my-service.com/webhook"
  }
}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook
from flask import Flask, request

app = Flask(__name__)

@app.route("/webhook", methods=["POST"])
def handle_webhook():
    event = request.json
    
    if event["event"] == "MODEL_VERSION_TRANSITIONED_STAGE":
        if event["to_stage"] == "Production":
            # –¢—Ä–∏–≥–≥–µ—Ä deployment
            deploy_model(event["model_name"], event["version"])
    
    return {"status": "ok"}</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 9. Best Practices</h2>
    <ul>
      <li>‚úÖ <strong>–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: major.minor.patch</li>
      <li>‚úÖ <strong>–û–ø–∏—Å–∞–Ω–∏—è</strong>: –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é –≤–µ—Ä—Å–∏—é</li>
      <li>‚úÖ <strong>–¢–µ–≥–∏</strong>: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</li>
      <li>‚úÖ <strong>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</strong>: CI/CD –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</li>
      <li>‚úÖ <strong>Approval process</strong>: –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º</li>
      <li>‚úÖ <strong>Rollback plan</strong>: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞</li>
      <li>‚úÖ <strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</strong>: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ performance</li>
      <li>‚úÖ <strong>–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: —Å—Ç–∞—Ä—ã–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å deployment</h2>
    <pre><code># Deployment —Å MLflow
import mlflow.sagemaker as mfs

# Deploy to SageMaker
mfs.deploy(
    app_name="my-model",
    model_uri="models:/my_model/Production",
    region_name="us-east-1",
    mode="create"
)

# Deploy to Azure ML
from azureml.core import Workspace, Model

ws = Workspace.from_config()
model = Model.register(
    workspace=ws,
    model_name="my_model",
    model_path="model.pkl"
)

# Deploy to Kubernetes
from mlflow.deployments import get_deploy_client

client = get_deploy_client("kubernetes")
client.create_deployment(
    name="my-model",
    model_uri="models:/my_model/Production"
)</code></pre>
  </div>


</div>
</body>
</html>