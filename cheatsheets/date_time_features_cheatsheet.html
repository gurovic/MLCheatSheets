<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–î–∞—Ç–∞-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    .good-vs-bad {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .good-vs-bad div {
      flex: 1;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .good {
      background-color: #f0f9f4;
      border-left: 3px solid #2e8b57;
    }

    .bad {
      background-color: #fdf0f2;
      border-left: 3px solid #d32f2f;
    }

    .good h3, .bad h3 {
      margin: 0 0 4px;
      font-size: 1em;
      font-weight: 700;
    }

    .good ul, .bad ul {
      padding-left: 20px;
      margin: 0;
    }

    .good li::before { content: "‚úÖ "; font-weight: bold; }
    .bad li::before { content: "‚ùå "; font-weight: bold; }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üìÖ –î–∞—Ç–∞-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ Cheatsheet</h1>
  <div class="subtitle">Feature Engineering –¥–ª—è –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å<br>üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –°—É—Ç—å</h2>
    <ul>
      <li><strong>–¶–µ–ª—å</strong>: –∏–∑–≤–ª–µ—á—å –ø–æ–ª–µ–∑–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
      <li><strong>–ó–∞—á–µ–º</strong>: –¥–∞—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∫—Ä—ã—Ç—ã–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ (—Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å, —Ç—Ä–µ–Ω–¥—ã)</li>
      <li><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong>: —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ 5-30%</li>
      <li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –ø—Ä–æ–¥–∞–∂–∏, –ª–æ–≥–∏, —Ñ–∏–Ω–∞–Ω—Å—ã, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 2. –ë–∞–∑–æ–≤–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h2>
    <pre><code>import pandas as pd

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ datetime
df['date'] = pd.to_datetime(df['date'])

# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
df['year'] = df['date'].dt.year
df['month'] = df['date'].dt.month
df['day'] = df['date'].dt.day
df['hour'] = df['date'].dt.hour
df['minute'] = df['date'].dt.minute
df['dayofweek'] = df['date'].dt.dayofweek  # 0=–ü–Ω, 6=–í—Å
df['dayofyear'] = df['date'].dt.dayofyear
df['quarter'] = df['date'].dt.quarter
df['weekofyear'] = df['date'].dt.isocalendar().week

# –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ
df['day_name'] = df['date'].dt.day_name()

# –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
df['is_weekend'] = df['dayofweek'].isin([5, 6]).astype(int)
df['is_month_start'] = df['date'].dt.is_month_start.astype(int)
df['is_month_end'] = df['date'].dt.is_month_end.astype(int)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 3. –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏</h2>
    <p><strong>–ü—Ä–æ–±–ª–µ–º–∞</strong>: –º–µ—Å—è—Ü 12 –∏ –º–µ—Å—è—Ü 1 –¥–∞–ª–µ–∫–∏ —á–∏—Å–ª–æ–º, –Ω–æ –±–ª–∏–∑–∫–∏ –ø–æ —Å–º—ã—Å–ª—É</p>
    <p><strong>–†–µ—à–µ–Ω–∏–µ</strong>: —Å–∏–Ω—É—Å –∏ –∫–æ—Å–∏–Ω—É—Å –¥–ª—è —Ü–∏–∫–ª–∏—á–Ω–æ—Å—Ç–∏</p>
    <pre><code>import numpy as np

# –ú–µ—Å—è—Ü (1-12)
df['month_sin'] = np.sin(2 * np.pi * df['month'] / 12)
df['month_cos'] = np.cos(2 * np.pi * df['month'] / 12)

# –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0-6)
df['dow_sin'] = np.sin(2 * np.pi * df['dayofweek'] / 7)
df['dow_cos'] = np.cos(2 * np.pi * df['dayofweek'] / 7)

# –ß–∞—Å (0-23)
df['hour_sin'] = np.sin(2 * np.pi * df['hour'] / 24)
df['hour_cos'] = np.cos(2 * np.pi * df['hour'] / 24)

# –î–µ–Ω—å –≥–æ–¥–∞ (1-365)
df['doy_sin'] = np.sin(2 * np.pi * df['dayofyear'] / 365.25)
df['doy_cos'] = np.cos(2 * np.pi * df['dayofyear'] / 365.25)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 4. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</h2>
    <pre><code># –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –¥–∞—Ç–∞–º–∏
df['days_since_start'] = (df['date'] - df['date'].min()).dt.days
df['days_until_end'] = (df['date'].max() - df['date']).dt.days

# –í—Ä–µ–º—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è
df = df.sort_values('date')
df['days_since_last_event'] = df['date'].diff().dt.days

# –°–∫–æ–ª—å–∑—è—â–∏–µ –æ–∫–Ω–∞
df['events_last_7d'] = df.rolling(window=7, on='date')['event'].sum()
df['events_last_30d'] = df.rolling(window=30, on='date')['event'].sum()

# –í—Ä–µ–º—è –¥–æ/–ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –¥–∞—Ç—ã
reference_date = pd.to_datetime('2024-01-01')
df['days_from_reference'] = (df['date'] - reference_date).dt.days

# –í–æ–∑—Ä–∞—Å—Ç –¥–∞–Ω–Ω—ã—Ö
df['data_age_days'] = (pd.Timestamp.now() - df['date']).dt.days</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 5. –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–Ω–∏</h2>
    <pre><code>from datetime import date
import holidays

# –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –†–æ—Å—Å–∏–∏
ru_holidays = holidays.Russia()
df['is_holiday'] = df['date'].apply(
    lambda x: x.date() in ru_holidays
).astype(int)

# –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
def days_to_holiday(d):
    upcoming = [h for h in ru_holidays.keys() if h >= d.date()]
    if upcoming:
        return (min(upcoming) - d.date()).days
    return 365

df['days_to_holiday'] = df['date'].apply(days_to_holiday)

# –î–µ–Ω—å –¥–æ/–ø–æ—Å–ª–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
df['is_pre_holiday'] = (df['days_to_holiday'] == 1).astype(int)
df['is_post_holiday'] = df['is_holiday'].shift(1).fillna(0).astype(int)

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã
special_dates = ['2024-01-01', '2024-12-31']
special_dates = pd.to_datetime(special_dates)
df['is_special'] = df['date'].isin(special_dates).astype(int)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 6. –ë–∏–∑–Ω–µ—Å-–¥–Ω–∏ –∏ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</h2>
    <pre><code>from pandas.tseries.offsets import BDay

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π
df['business_days_from_start'] = df['date'].apply(
    lambda x: len(pd.bdate_range(df['date'].min(), x))
)

# –≠—Ç–æ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å?
df['is_business_day'] = df['date'].apply(
    lambda x: bool(len(pd.bdate_range(x, x)))
).astype(int)

# –†–∞–±–æ—á–∏–µ —á–∞—Å—ã
df['is_work_hours'] = (
    (df['hour'] >= 9) & (df['hour'] < 18) & 
    (df['dayofweek'] < 5)
).astype(int)

# –ß–∞—Å—Ç–∏ –¥–Ω—è
def part_of_day(hour):
    if 6 <= hour < 12:
        return 'morning'
    elif 12 <= hour < 18:
        return 'afternoon'
    elif 18 <= hour < 22:
        return 'evening'
    else:
        return 'night'

df['part_of_day'] = df['hour'].apply(part_of_day)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 7. –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –∏ —Ç—Ä–µ–Ω–¥—ã</h2>
    <pre><code># –°–µ–∑–æ–Ω
def get_season(month):
    if month in [12, 1, 2]:
        return 'winter'
    elif month in [3, 4, 5]:
        return 'spring'
    elif month in [6, 7, 8]:
        return 'summer'
    else:
        return 'autumn'

df['season'] = df['month'].apply(get_season)

# –ù–µ–¥–µ–ª—è –º–µ—Å—è—Ü–∞
df['week_of_month'] = (df['day'] - 1) // 7 + 1

# –î–µ–∫–∞–¥–∞ –º–µ—Å—è—Ü–∞
df['decade_of_month'] = (df['day'] - 1) // 10 + 1

# –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–µ—Ä–µ–¥–∏–Ω–∞ –º–µ—Å—è—Ü–∞
df['is_mid_month'] = ((df['day'] >= 13) & (df['day'] <= 17)).astype(int)

# –¢—Ä–µ–Ω–¥ (–ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä)
df['trend'] = range(len(df))

# –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–µ–Ω–¥ (0-1)
df['trend_normalized'] = df['trend'] / df['trend'].max()</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. –ê–≥—Ä–µ–≥–∞—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</h2>
    <pre><code># –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
# –°—Ä–µ–¥–Ω–µ–µ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
dow_mean = df.groupby('dayofweek')['target'].transform('mean')
df['target_mean_by_dow'] = dow_mean

# –°—Ä–µ–¥–Ω–µ–µ –ø–æ —á–∞—Å–∞–º
hour_mean = df.groupby('hour')['target'].transform('mean')
df['target_mean_by_hour'] = hour_mean

# –ú–µ—Å—è—á–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã
df['year_month'] = df['date'].dt.to_period('M')
monthly_stats = df.groupby('year_month')['target'].agg([
    'mean', 'std', 'min', 'max', 'count'
]).add_prefix('monthly_')
df = df.join(monthly_stats, on='year_month')

# –°–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ
df = df.sort_values('date')
df['ma_7d'] = df['target'].rolling(window=7, min_periods=1).mean()
df['ma_30d'] = df['target'].rolling(window=30, min_periods=1).mean()

# –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ
df['ema_7d'] = df['target'].ewm(span=7, adjust=False).mean()</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 9. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h2>
    <pre><code># –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
df['is_weekend_evening'] = (
    (df['is_weekend'] == 1) & (df['hour'] >= 18)
).astype(int)

df['is_workday_morning'] = (
    (df['is_weekend'] == 0) & (df['hour'] >= 6) & (df['hour'] < 12)
).astype(int)

df['is_holiday_or_weekend'] = (
    (df['is_holiday'] == 1) | (df['is_weekend'] == 1)
).astype(int)

# –ú–µ—Å—è—Ü + —á–∞—Å (–¥–ª—è seasonal patterns)
df['month_hour'] = df['month'].astype(str) + '_' + df['hour'].astype(str)

# –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ + —á–∞—Å
df['dow_hour'] = df['dayofweek'].astype(str) + '_' + df['hour'].astype(str)

# –ö–≤–∞—Ä—Ç–∞–ª + –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
df['quarter_dow'] = df['quarter'].astype(str) + '_' + df['dayofweek'].astype(str)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 10. –õ–∞–≥–∏ –∏ –æ–ø–µ—Ä–µ–∂–µ–Ω–∏—è</h2>
    <pre><code># –õ–∞–≥–∏ (–ø—Ä–æ—à–ª—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
df = df.sort_values('date')
df['target_lag_1'] = df['target'].shift(1)
df['target_lag_7'] = df['target'].shift(7)
df['target_lag_30'] = df['target'].shift(30)

# –û–ø–µ—Ä–µ–∂–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
df['target_lead_1'] = df['target'].shift(-1)

# –†–∞–∑–Ω–æ—Å—Ç—å
df['target_diff_1'] = df['target'] - df['target_lag_1']
df['target_diff_7'] = df['target'] - df['target_lag_7']

# –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
df['target_pct_change_1'] = df['target'].pct_change(1)
df['target_pct_change_7'] = df['target'].pct_change(7)

# –°–∫–æ–ª—å–∑—è—â–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è
df['target_rolling_std_7'] = df['target'].rolling(window=7).std()
df['target_rolling_std_30'] = df['target'].rolling(window=30).std()</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 11. –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã</h2>
    <pre><code># –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–æ–≤
df['is_year_start'] = (df['month'] == 1).astype(int)
df['is_year_end'] = (df['month'] == 12).astype(int)
df['is_quarter_start'] = df['date'].dt.is_quarter_start.astype(int)
df['is_quarter_end'] = df['date'].dt.is_quarter_end.astype(int)

# "–ó–∞—Ä–ø–ª–∞—Ç–Ω—ã–µ" –¥–Ω–∏
df['is_payday'] = df['day'].isin([1, 2, 15, 16]).astype(int)

# –í—ã—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
df['is_long_weekend'] = (
    (df['is_weekend'] == 1) & 
    ((df['days_to_holiday'] <= 2) | (df['is_post_holiday'] == 1))
).astype(int)

# –î–Ω–∏ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂ (Black Friday, etc)
df['is_black_friday'] = (
    (df['month'] == 11) & 
    (df['dayofweek'] == 4) & 
    (df['week_of_month'] == 4)
).astype(int)

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–Ω–¥–µ–º–∏—è)
lockdown_start = pd.to_datetime('2020-03-01')
lockdown_end = pd.to_datetime('2020-06-01')
df['is_lockdown'] = (
    (df['date'] >= lockdown_start) & (df['date'] <= lockdown_end)
).astype(int)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 12. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</h2>
    <table>
      <tr><th>–ü—Ä–∞–∫—Ç–∏–∫–∞</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
      <tr><td><strong>–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ</strong></td><td>–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sin/cos –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</td></tr>
      <tr><td><strong>–ú–∞—Å—à—Ç–∞–±</strong></td><td>–ù–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ —Ç—Ä–µ–Ω–¥—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</td></tr>
      <tr><td><strong>–õ–∞–≥–∏</strong></td><td>–û—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å —É—Ç–µ—á–∫–æ–π –¥–∞–Ω–Ω—ã—Ö (data leakage)</td></tr>
      <tr><td><strong>–í–∞–ª–∏–¥–∞—Ü–∏—è</strong></td><td>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ (TimeSeriesSplit)</td></tr>
      <tr><td><strong>Null –∑–Ω–∞—á–µ–Ω–∏—è</strong></td><td>–ó–∞–ø–æ–ª–Ω—è–π—Ç–µ forward fill –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤</td></tr>
    </table>

    <h3>‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:</h3>
    <ul>
      <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É–¥—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–∞–≥–∞—Ö</li>
      <li>–ó–∞–±—ã—Ç—å –ø—Ä–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –ø—Ä–∏—Ä–æ–¥—É –≤—Ä–µ–º–µ–Ω–∏</li>
      <li>–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤</li>
      <li>–ù–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 13. –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä</h2>
    <pre><code>import pandas as pd
import numpy as np
from datetime import datetime

def create_date_features(df, date_col='date'):
    """–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤"""
    df = df.copy()
    df[date_col] = pd.to_datetime(df[date_col])
    
    # –ë–∞–∑–æ–≤—ã–µ
    df['year'] = df[date_col].dt.year
    df['month'] = df[date_col].dt.month
    df['day'] = df[date_col].dt.day
    df['hour'] = df[date_col].dt.hour
    df['dayofweek'] = df[date_col].dt.dayofweek
    df['quarter'] = df[date_col].dt.quarter
    df['dayofyear'] = df[date_col].dt.dayofyear
    
    # –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ
    df['month_sin'] = np.sin(2 * np.pi * df['month'] / 12)
    df['month_cos'] = np.cos(2 * np.pi * df['month'] / 12)
    df['dow_sin'] = np.sin(2 * np.pi * df['dayofweek'] / 7)
    df['dow_cos'] = np.cos(2 * np.pi * df['dayofweek'] / 7)
    
    # –õ–æ–≥–∏—á–µ—Å–∫–∏–µ
    df['is_weekend'] = df['dayofweek'].isin([5, 6]).astype(int)
    df['is_month_start'] = df[date_col].dt.is_month_start.astype(int)
    df['is_month_end'] = df[date_col].dt.is_month_end.astype(int)
    
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã
    df['days_since_start'] = (df[date_col] - df[date_col].min()).dt.days
    
    return df

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
df_features = create_date_features(df, 'transaction_date')
print(f"–°–æ–∑–¥–∞–Ω–æ {len(df_features.columns)} –ø—Ä–∏–∑–Ω–∞–∫–æ–≤")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 14. –ß–µ–∫-–ª–∏—Å—Ç</h2>
    <ul>
      <li>[ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ datetime —Ñ–æ—Ä–º–∞—Ç</li>
      <li>[ ] –ò–∑–≤–ª–µ—á—å –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–≥–æ–¥, –º–µ—Å—è—Ü, –¥–µ–Ω—å, —á–∞—Å)</li>
      <li>[ ] –°–æ–∑–¥–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (sin/cos)</li>
      <li>[ ] –î–æ–±–∞–≤–∏—Ç—å is_weekend, is_holiday</li>
      <li>[ ] –í—ã—á–∏—Å–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</li>
      <li>[ ] –°–æ–∑–¥–∞—Ç—å –ª–∞–≥–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤</li>
      <li>[ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º</li>
      <li>[ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —É—Ç–µ—á–∫—É –¥–∞–Ω–Ω—ã—Ö</li>
      <li>[ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TimeSeriesSplit –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏</li>
      <li>[ ] –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å</li>
    </ul>

    <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É:</h3>
    <blockquote>
      ¬´–î–∞—Ç—ã ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–∞. –û–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã: –ª—é–¥–∏ –ø–æ–∫—É–ø–∞—é—Ç –±–æ–ª—å—à–µ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ, –ø—Ä–æ–¥–∞–∂–∏ —Ä–∞—Å—Ç—É—Ç –ø–µ—Ä–µ–¥ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º–∏, —Ç—Ä–∞—Ñ–∏–∫ –≤—ã—à–µ —É—Ç—Ä–æ–º –∏ –≤–µ—á–µ—Ä–æ–º. –ò–∑–≤–ª–µ–∫–∞—è —ç—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏, –º–æ–¥–µ–ª—å "–ø–æ–Ω–∏–º–∞–µ—Ç" –≤—Ä–µ–º—è –∏ –¥–µ–ª–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã¬ª.
    </blockquote>
  </div>

</div>

</body>
</html>
