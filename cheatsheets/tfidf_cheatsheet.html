<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üìä TF-IDF Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üìä TF-IDF</h1>
  <div class="subtitle">üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –°—É—Ç—å</h2>
    <ul>
      <li><strong>TF-IDF</strong>: Term Frequency - Inverse Document Frequency</li>
      <li><strong>–¶–µ–ª—å</strong>: –æ—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–ª–æ–≤–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ</li>
      <li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –ø–æ–∏—Å–∫, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤, keyword extraction</li>
      <li><strong>–ü—Ä–∏–Ω—Ü–∏–ø</strong>: —á–∞—Å—Ç—ã–µ –≤ –¥–æ–∫-—Ç–µ + —Ä–µ–¥–∫–∏–µ –≤ –∫–æ—Ä–ø—É—Å–µ = –≤–∞–∂–Ω—ã–µ</li>
    </ul>
    <blockquote>TF-IDF –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –≤–µ—Å —Å–ª–æ–≤–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∞—Å—Ç–æ—Ç—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ —Ä–µ–¥–∫–æ—Å—Ç–∏ –≤ –∫–æ—Ä–ø—É—Å–µ</blockquote>

  <div class="block">
    <h2>üî∑ 2. –§–æ—Ä–º—É–ª–∞</h2>
    <pre><code>TF-IDF(t, d) = TF(t, d) √ó IDF(t)

TF(t, d) = count(t –≤ d) / |d|

IDF(t) = log(N / df(t))

–≥–¥–µ:
- t - —Ç–µ—Ä–º–∏–Ω (—Å–ª–æ–≤–æ)
- d - –¥–æ–∫—É–º–µ–Ω—Ç
- N - —á–∏—Å–ª–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- df(t) - —á–∏—Å–ª–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ—Ä–º–∏–Ω–æ–º t</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 3. Sklearn —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è</h2>
    <pre><code>from sklearn.feature_extraction.text import TfidfVectorizer

documents = [
    "This is the first document",
    "This document is the second document",
    "And this is the third one",
    "Is this the first document"
]

# –°–æ–∑–¥–∞–Ω–∏–µ TF-IDF –º–∞—Ç—Ä–∏—Ü—ã
vectorizer = TfidfVectorizer()
tfidf_matrix = vectorizer.fit_transform(documents)

# –ü–æ–ª—É—á–µ–Ω–∏–µ feature names
feature_names = vectorizer.get_feature_names_out()

# TF-IDF –≤–µ—Å–∞
print(tfidf_matrix.toarray())
print(feature_names)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 4. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TfidfVectorizer</h2>
    <pre><code># –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
vectorizer = TfidfVectorizer(
    max_features=100,      # –¢–æ–ø N —Å–ª–æ–≤
    min_df=2,              # –ú–∏–Ω. —á–∞—Å—Ç–æ—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    max_df=0.8,            # –ú–∞–∫—Å. —á–∞—Å—Ç–æ—Ç–∞ (—É–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ø-—Å–ª–æ–≤–∞)
    ngram_range=(1, 2),    # –£–Ω–∏–≥—Ä–∞–º–º—ã –∏ –±–∏–≥—Ä–∞–º–º—ã
    norm='l2',             # L2 –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    use_idf=True,          # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDF
    smooth_idf=True,       # –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ IDF
    sublinear_tf=True      # log(TF) –≤–º–µ—Å—Ç–æ TF
)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 5. N-–≥—Ä–∞–º–º—ã</h2>
    <pre><code># –ë–∏–≥—Ä–∞–º–º—ã –∏ —Ç—Ä–∏–≥—Ä–∞–º–º—ã
vectorizer = TfidfVectorizer(ngram_range=(1, 3))
tfidf = vectorizer.fit_transform(documents)

# –ü—Ä–∏–º–µ—Ä—ã n-–≥—Ä–∞–º–º
# "machine learning" (–±–∏–≥—Ä–∞–º–º–∞)
# "deep learning model" (—Ç—Ä–∏–≥—Ä–∞–º–º–∞)

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ø N-–≥—Ä–∞–º–º
import numpy as np

def get_top_ngrams(tfidf_matrix, feature_names, n=10):
    scores = np.asarray(tfidf_matrix.sum(axis=0)).ravel()
    top_indices = scores.argsort()[-n:][::-1]
    
    for idx in top_indices:
        print(f"{feature_names[idx]}: {scores[idx]:.4f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 6. –í–∞—Ä–∏–∞—Ü–∏–∏ TF</h2>
    <table>
      <tr>
        <th>–°—Ö–µ–º–∞</th>
        <th>–§–æ—Ä–º—É–ª–∞</th>
        <th>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</th>
      </tr>
      <tr>
        <td>Raw Count</td>
        <td>count(t)</td>
        <td>–ö–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ–∫—Å—Ç—ã</td>
      </tr>
      <tr>
        <td>Term Frequency</td>
        <td>count(t) / |d|</td>
        <td>–†–∞–∑–Ω–∞—è –¥–ª–∏–Ω–∞</td>
      </tr>
      <tr>
        <td>Log Normalization</td>
        <td>log(1 + count(t))</td>
        <td>–°–Ω–∏–∑–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ —á–∞—Å—Ç—ã—Ö</td>
      </tr>
      <tr>
        <td>Binary</td>
        <td>1 –µ—Å–ª–∏ t –≤ d, –∏–Ω–∞—á–µ 0</td>
        <td>Presence/absence</td>
      </tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 7. Keyword extraction</h2>
    <pre><code>def extract_keywords(text, top_n=10):
    """
    –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    """
    vectorizer = TfidfVectorizer(
        max_features=100,
        ngram_range=(1, 2),
        stop_words='english'
    )
    
    tfidf = vectorizer.fit_transform([text])
    feature_names = vectorizer.get_feature_names_out()
    scores = tfidf.toarray()[0]
    
    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é
    top_indices = scores.argsort()[-top_n:][::-1]
    keywords = [(feature_names[i], scores[i]) 
                for i in top_indices]
    
    return keywords

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
keywords = extract_keywords(document)
for word, score in keywords:
    print(f"{word}: {score:.4f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. Similarity –ø–æ–∏—Å–∫</h2>
    <pre><code>from sklearn.metrics.pairwise import cosine_similarity

# TF-IDF –≤–µ–∫—Ç–æ—Ä—ã
tfidf_matrix = vectorizer.fit_transform(documents)

# –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
similarity_matrix = cosine_similarity(tfidf_matrix)

# –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
def find_similar(query_idx, top_n=3):
    scores = similarity_matrix[query_idx]
    top_indices = scores.argsort()[-top_n-1:-1][::-1]
    
    for idx in top_indices:
        print(f"Doc {idx}: similarity = {scores[idx]:.4f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 9. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Bag-of-Words</h2>
    <table>
      <tr>
        <th>–ú–µ—Ç—Ä–∏–∫–∞</th>
        <th>BoW</th>
        <th>TF-IDF</th>
      </tr>
      <tr>
        <td>–†–µ–¥–∫–∏–µ —Å–ª–æ–≤–∞</td>
        <td>–†–∞–≤–Ω—ã–π –≤–µ—Å</td>
        <td>–í—ã—Å–æ–∫–∏–π –≤–µ—Å</td>
      </tr>
      <tr>
        <td>–ß–∞—Å—Ç—ã–µ —Å–ª–æ–≤–∞</td>
        <td>–í—ã—Å–æ–∫–∏–π –≤–µ—Å</td>
        <td>–ù–∏–∑–∫–∏–π –≤–µ—Å</td>
      </tr>
      <tr>
        <td>–°—Ç–æ–ø-—Å–ª–æ–≤–∞</td>
        <td>–®—É–º</td>
        <td>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∞–≤–ª—è—é—Ç—Å—è</td>
      </tr>
      <tr>
        <td>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</td>
        <td>–ü—Ä–æ—â–µ</td>
        <td>–°–ª–æ–∂–Ω–µ–µ</td>
      </tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 10. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</h2>
    <ul>
      <li><strong>–°—Ç–æ–ø-—Å–ª–æ–≤–∞</strong>: —É–¥–∞–ª—è–π—Ç–µ —Å –ø–æ–º–æ—â—å—é max_df</li>
      <li><strong>min_df</strong>: –∏—Å–∫–ª—é—á–∞–π—Ç–µ —Ä–µ–¥–∫–∏–µ —Å–ª–æ–≤–∞ (min_df=2)</li>
      <li><strong>–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è</strong>: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ L2</li>
      <li><strong>N-–≥—Ä–∞–º–º—ã</strong>: (1,2) –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞</li>
      <li><strong>Sublinear TF</strong>: –≤–∫–ª—é—á–∞–π—Ç–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤</li>
      <li><strong>–í–∞–ª–∏–¥–∞—Ü–∏—è</strong>: –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–æ–ø —Å–ª–æ–≤–∞</li>
    </ul>
  </div>

</div>

</div>
</body>
</html>
