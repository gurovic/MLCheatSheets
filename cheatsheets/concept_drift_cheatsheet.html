<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><title>Concept Drift Detection Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
<style>@media screen{{body{{font-family:-apple-system,sans-serif;color:#333;background:#fafcff;padding:10px}}}}.container{{column-count:3;column-gap:20px}}.block{{break-inside:avoid;margin-bottom:1.2em;padding:12px;background:white;border-radius:6px}}h1{{font-size:1.6em;color:#1a5fb4;text-align:center;column-span:all}}.subtitle{{text-align:center;color:#666;font-size:0.9em;margin-bottom:12px;column-span:all}}h2{{font-size:1.15em;color:#1a5fb4;margin:8px 0;padding-bottom:4px;border-bottom:1px solid #e0e7ff}}code{{background:#f0f4ff;padding:2px 4px;border-radius:3px}}pre{{background:#f0f4ff;padding:8px;border-radius:4px;overflow-x:auto;font-size:0.84em}}table{{width:100%;border-collapse:collapse;font-size:0.82em}}th{{background:#e6f0ff;padding:4px}}td{{padding:4px;border-bottom:1px solid #f0f4ff}}</style></head><body>
<div class="container"><h1>üîÑ Concept Drift Detection</h1>
<div class="subtitle">üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>
<div class="block"><h2>1. –ß—Ç–æ —Ç–∞–∫–æ–µ Drift?</h2><ul><li><strong>Data Drift</strong>: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è X</li><li><strong>Concept Drift</strong>: –∏–∑–º–µ–Ω–µ–Ω–∏–µ P(Y|X)</li><li><strong>Label Drift</strong>: –∏–∑–º–µ–Ω–µ–Ω–∏–µ Y</li></ul></div>
<div class="block"><h2>2. –î–µ—Ç–µ–∫—Ü–∏—è –¥—Ä–µ–π—Ñ–∞</h2><pre><code>from scipy.stats import ks_2samp

# Kolmogorov-Smirnov test
train_data = [...]
production_data = [...]

stat, p_value = ks_2samp(train_data, production_data)
if p_value < 0.05:
<div class="block"><h2>3. Population Stability Index</h2><pre><code>import numpy as np

def calculate_psi(expected, actual, bins=10):
    breakpoints = np.quantile(expected, 
                              np.linspace(0, 1, bins+1))
    
    expected_percents = np.histogram(expected, breakpoints)[0] / len(expected)
    actual_percents = np.histogram(actual, breakpoints)[0] / len(actual)
    
    psi = np.sum((actual_percents - expected_percents) * 
                 np.log(actual_percents / expected_percents))
    
    return psi

psi = calculate_psi(train_data, prod_data)
# PSI < 0.1: no drift
# PSI 0.1-0.2: moderate
# PSI > 0.2: significant drift</code></pre></div>
<div class="block"><h2>4. ADWIN</h2><pre><code>from river import drift

detector = drift.ADWIN()

for i, value in enumerate(stream):
    detector.update(value)
    if detector.drift_detected:
        print(f"Drift at index {i}")</code></pre></div>
<div class="block"><h2>5. DDM</h2><pre><code>from river.drift import DDM

ddm = DDM()

for pred, true in zip(predictions, true_labels):
    error = int(pred != true)
    ddm.update(error)
    
    if ddm.drift_detected:
<div class="block"><h2>6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫</h2><pre><code># –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ accuracy/F1 –≤–æ –≤—Ä–µ–º–µ–Ω–∏
import pandas as pd

metrics_log = []
for batch in data_stream:
    predictions = model.predict(batch)
    accuracy = compute_accuracy(predictions, batch.labels)
    
    metrics_log.append({
        'timestamp': batch.timestamp,
        'accuracy': accuracy
    })

df = pd.DataFrame(metrics_log)
<div class="block"><h2>7. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–∞–∫—Ü–∏–∏</h2><ul><li><strong>Periodic Retraining</strong>: —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ</li><li><strong>Triggered Retraining</strong>: –ø—Ä–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ drift</li><li><strong>Incremental Learning</strong>: –æ–Ω–ª–∞–π–Ω-–æ–±—É—á–µ–Ω–∏–µ</li><li><strong>Ensemble</strong>: –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤</li></ul></div>
<div class="block"><h2>8. –ú–µ—Ç–æ–¥—ã –¥–µ—Ç–µ–∫—Ü–∏–∏</h2><table><tr><th>–ú–µ—Ç–æ–¥</th><th>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</th></tr><tr><td>KS-test</td><td>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</td></tr><tr><td>PSI</td><td>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π</td></tr><tr><td>ADWIN</td><td>–ü–æ—Ç–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</td></tr><tr><td>DDM</td><td>–û—à–∏–±–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</td></tr><tr><td>Monitoring</td><td>–ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏</td></tr></table></div>
<div class="block"><h2>9. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h2><pre><code># Evidently AI
from evidently.test_suite import TestSuite
from evidently.test_preset import DataDriftTestPreset

test_suite = TestSuite(tests=[DataDriftTestPreset()])
test_suite.run(reference_data=train, 
               current_data=prod)
test_suite</code></pre></div>
<div class="block"><h2>10. –ß–µ–∫-–ª–∏—Å—Ç</h2><ul><li>–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</li><li>–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏</li><li>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ drift</li><li>–ò–º–µ—Ç—å –ø–ª–∞–Ω –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è</li><li>–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</li></ul></div>
<div class="block">
<h2>11. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Drift —Å –ø–æ–º–æ—â—å—é KS-test</h2>
<pre><code>from scipy.stats import ks_2samp
import pandas as pd

def detect_drift_ks_test(reference_data, current_data, features, threshold=0.05):
    """–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—Ä–µ–π—Ñ–∞ —Å –ø–æ–º–æ—â—å—é Kolmogorov-Smirnov —Ç–µ—Å—Ç–∞"""
    drift_detected = {}
    
    for feature in features:
        # KS-test –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞
        statistic, p_value = ks_2samp(
            reference_data[feature], 
            current_data[feature]
        )
        
        drift_detected[feature] = {
            'p_value': p_value,
            'drift': p_value < threshold
        }
        
        if p_value < threshold:
            print(f"‚ö†Ô∏è  Drift detected in {feature}: p={p_value:.4f}")
    
    return drift_detected

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
drift_results = detect_drift_ks_test(X_train_df, X_new_df, 
                                     X_train_df.columns, 
                                     threshold=0.01)</code></pre>
</div>

<div class="block">
<h2>12. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Production</h2>
<pre><code># Continuous monitoring setup
class DriftMonitor:
    def __init__(self, reference_data, window_size=1000):
        self.reference_data = reference_data
        self.window_size = window_size
        self.current_window = []
        self.alerts = []
    
    def update(self, new_sample):
        self.current_window.append(new_sample)
        
        if len(self.current_window) >= self.window_size:
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ drift
            current_df = pd.DataFrame(self.current_window)
            drift = self.check_drift(current_df)
            
            if drift:
                self.alerts.append({
                    'timestamp': datetime.now(),
                    'type': 'data_drift'
                })
            
            # –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ
            self.current_window = self.current_window[-self.window_size//2:]
    
    def check_drift(self, current_data):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ KS-test –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞
        for col in self.reference_data.columns:
            _, p_value = ks_2samp(self.reference_data[col], 
                                 current_data[col])
            if p_value < 0.01:
                return True
        return False

# Production usage
monitor = DriftMonitor(X_train)
for sample in incoming_stream:
    monitor.update(sample)
    if monitor.alerts:
        # Trigger retraining or alert
        trigger_retraining_pipeline()</code></pre>
</div>

<div class="block">
<h2>13. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Drift</h2>
<ul>
<li><strong>–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏</strong>: –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
<li><strong>–ê–¥–∞–ø—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏</strong>: –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</li>
<li><strong>–ê–Ω—Å–∞–º–±–ª—å –º–æ–¥–µ–ª–µ–π</strong>: –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö</li>
<li><strong>Feature engineering</strong>: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</li>
<li><strong>–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π</strong>: –Ω–∞ pre-trained –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É</li>
<li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã</strong>: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</li>
</ul>
</div>

<div class="block">
<h2>14. –ß–µ–∫-–ª–∏—Å—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Drift</h2>
<ol>
<li>‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å baseline –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ training data</li>
<li>‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ö–æ–¥–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</li>
<li>‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏</li>
<li>‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å performance –º–µ—Ç—Ä–∏–∫–∏</li>
<li>‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã (KS, Chi-square)</li>
<li>‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º</li>
<li>‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ alerts</li>
<li>‚úÖ –ò–º–µ—Ç—å –ø–ª–∞–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ drift</li>
<li>‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏</li>
<li>‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –º–æ–¥–µ–ª–∏</li>
</ol>
</div>

</div>
</body></html>