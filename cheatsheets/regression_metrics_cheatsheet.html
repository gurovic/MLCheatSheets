<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    .good-vs-bad {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .good-vs-bad div {
      flex: 1;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .good {
      background-color: #f0f9f4;
      border-left: 3px solid #2e8b57;
    }

    .bad {
      background-color: #fdf0f2;
      border-left: 3px solid #d32f2f;
    }

    .good h3, .bad h3 {
      margin: 0 0 4px;
      font-size: 1em;
      font-weight: 700;
    }

    .good ul, .bad ul {
      padding-left: 20px;
      margin: 0;
    }

    .good li::before { content: "‚úÖ "; font-weight: bold; }
    .bad li::before { content: "‚ùå "; font-weight: bold; }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üéØ –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏</h1>
  <div class="subtitle">üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏</h2>
    <table>
      <tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th><th>–î–∏–∞–ø–∞–∑–æ–Ω</th><th>–õ—É—á—à–µ</th></tr>
      <tr><td><strong>MAE</strong></td><td>[0, ‚àû)</td><td>–ú–µ–Ω—å—à–µ</td></tr>
      <tr><td><strong>MSE</strong></td><td>[0, ‚àû)</td><td>–ú–µ–Ω—å—à–µ</td></tr>
      <tr><td><strong>RMSE</strong></td><td>[0, ‚àû)</td><td>–ú–µ–Ω—å—à–µ</td></tr>
      <tr><td><strong>R¬≤</strong></td><td>(-‚àû, 1]</td><td>–ë–æ–ª—å—à–µ (–∫ 1)</td></tr>
      <tr><td><strong>MAPE</strong></td><td>[0, ‚àû)</td><td>–ú–µ–Ω—å—à–µ</td></tr>
    </table>

  <div class="block">
    <h2>üî∑ 2. MAE (Mean Absolute Error)</h2>
    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> (1/n) √ó Œ£|y_true - y_pred|</p>
    <pre><code>from sklearn.metrics import mean_absolute_error

mae = mean_absolute_error(y_test, y_pred)
print(f"MAE: {mae:.3f}")

# –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: —Å—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
# –í —Ç–µ—Ö –∂–µ –µ–¥–∏–Ω–∏—Ü–∞—Ö, —á—Ç–æ –∏ —Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è</code></pre>
    <p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
    <ul>
      <li>–í—Å–µ –æ—à–∏–±–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–∞–∂–Ω—ã</li>
      <li>–ù—É–∂–Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º</li>
      <li>–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 3. MSE (Mean Squared Error)</h2>
    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> (1/n) √ó Œ£(y_true - y_pred)¬≤</p>
    <pre><code>from sklearn.metrics import mean_squared_error

mse = mean_squared_error(y_test, y_pred)
print(f"MSE: {mse:.3f}")

# –°–∏–ª—å–Ω–æ —à—Ç—Ä–∞—Ñ—É–µ—Ç –±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏
# –í –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π</code></pre>
    <p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
    <ul>
      <li>–ë–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏ —Ö—É–∂–µ –º–µ–ª–∫–∏—Ö</li>
      <li>–§—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏</li>
      <li>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 4. RMSE (Root Mean Squared Error)</h2>
    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> ‚àöMSE</p>
    <pre><code>from sklearn.metrics import mean_squared_error
import numpy as np

rmse = np.sqrt(mean_squared_error(y_test, y_pred))
# –∏–ª–∏
rmse = mean_squared_error(y_test, y_pred, squared=False)
print(f"RMSE: {rmse:.3f}")

# –í —Ç–µ—Ö –∂–µ –µ–¥–∏–Ω–∏—Ü–∞—Ö, —á—Ç–æ –∏ —Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
# –ë–æ–ª—å—à–µ —à—Ç—Ä–∞—Ñ—É–µ—Ç –±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏, —á–µ–º MAE</code></pre>
    <p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
    <ul>
      <li>–ù—É–∂–Ω–∞ —Ç–∞ –∂–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å, —á—Ç–æ —É y</li>
      <li>–ë–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã</li>
      <li>–°—Ç–∞–Ω–¥–∞—Ä—Ç –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 5. R¬≤ (R-squared, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏–∏)</h2>
    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> 1 - SS_res / SS_tot</p>
    <pre><code>from sklearn.metrics import r2_score

r2 = r2_score(y_test, y_pred)
print(f"R¬≤: {r2:.3f}")

# R¬≤ = 1: –∏–¥–µ–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
# R¬≤ = 0: –º–æ–¥–µ–ª—å –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ
# R¬≤ < 0: –º–æ–¥–µ–ª—å —Ö—É–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ!</code></pre>
    <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
    <ul>
      <li>–î–æ–ª—è –æ–±—ä—è—Å–Ω—ë–Ω–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–∏</li>
      <li>R¬≤ = 0.85 ‚Üí –º–æ–¥–µ–ª—å –æ–±—ä—è—Å–Ω—è–µ—Ç 85% –≤–∞—Ä–∏–∞—Ü–∏–∏</li>
      <li>–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Å—à—Ç–∞–±–∞</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 6. MAPE (Mean Absolute Percentage Error)</h2>
    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> (100/n) √ó Œ£|y_true - y_pred| / |y_true|</p>
    <pre><code>from sklearn.metrics import mean_absolute_percentage_error

mape = mean_absolute_percentage_error(y_test, y_pred)
print(f"MAPE: {mape:.2%}")

# –í –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
# –û–°–¢–û–†–û–ñ–ù–û: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ y_true = 0!</code></pre>
    <p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
    <ul>
      <li>–ù—É–∂–Ω—ã –ø—Ä–æ—Ü–µ–Ω—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å–∞</li>
      <li>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω–æ–º–∞—Å—à—Ç–∞–±–Ω—ã—Ö –∑–∞–¥–∞—á</li>
      <li>y_true –≤—Å–µ–≥–¥–∞ > 0</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫</h2>
    <pre><code>from sklearn.metrics import (
    mean_absolute_error,
    mean_squared_error,
    r2_score,
    mean_absolute_percentage_error
)
import numpy as np

def evaluate_regression(y_true, y_pred):
    """–ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏"""
    mae = mean_absolute_error(y_true, y_pred)
    mse = mean_squared_error(y_true, y_pred)
    rmse = np.sqrt(mse)
    r2 = r2_score(y_true, y_pred)
    
    # MAPE —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ y > 0
    if (y_true > 0).all():
        mape = mean_absolute_percentage_error(y_true, y_pred)
    else:
        mape = None
    
    print(f"MAE:  {mae:.3f}")
    print(f"MSE:  {mse:.3f}")
    print(f"RMSE: {rmse:.3f}")
    print(f"R¬≤:   {r2:.3f}")
    if mape:
        print(f"MAPE: {mape:.2%}")
    
    return {
        'mae': mae, 'mse': mse, 
        'rmse': rmse, 'r2': r2, 'mape': mape
    }

metrics = evaluate_regression(y_test, y_pred)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. Adjusted R¬≤</h2>
    <p>R¬≤ —Å –ø–æ–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —á–∏—Å–ª–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</p>
    <pre><code>def adjusted_r2_score(y_true, y_pred, n_features):
    """Adjusted R¬≤"""
    n = len(y_true)
    r2 = r2_score(y_true, y_pred)
    
    adjusted_r2 = 1 - (1 - r2) * (n - 1) / (n - n_features - 1)
    
    return adjusted_r2

adj_r2 = adjusted_r2_score(y_test, y_pred, X_test.shape[1])
print(f"Adjusted R¬≤: {adj_r2:.3f}")

# –®—Ç—Ä–∞—Ñ—É–µ—Ç –∑–∞ –∏–∑–ª–∏—à–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º —á–∏—Å–ª–æ–º –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 9. Median Absolute Error</h2>
    <p>–ú–µ–¥–∏–∞–Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫ (—É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –≤—ã–±—Ä–æ—Å–∞–º)</p>
    <pre><code>from sklearn.metrics import median_absolute_error

medae = median_absolute_error(y_test, y_pred)
print(f"Median AE: {medae:.3f}")

# –û—á–µ–Ω—å —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –≤—ã–±—Ä–æ—Å–∞–º
# –ü–æ–ª–µ–∑–Ω–∞, –∫–æ–≥–¥–∞ –≤ –¥–∞–Ω–Ω—ã—Ö –º–Ω–æ–≥–æ –∞–Ω–æ–º–∞–ª–∏–π</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 10. Max Error</h2>
    <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞</p>
    <pre><code>from sklearn.metrics import max_error
import numpy as np

max_err = max_error(y_test, y_pred)
print(f"Max Error: {max_err:.3f}")

# –°–∞–º–∞—è –±–æ–ª—å—à–∞—è –æ—à–∏–±–∫–∞
# –ü–æ–ª–µ–∑–Ω–∞ –¥–ª—è worst-case –∞–Ω–∞–ª–∏–∑–∞

# –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –≤—ã—á–∏—Å–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é
errors = np.abs(y_test - y_pred)
worst_idx = np.argmax(errors)
print(f"–•—É–¥—à–∏–π –ø—Ä–∏–º–µ—Ä: –∏–Ω–¥–µ–∫—Å {worst_idx}")
print(f"y_true: {y_test[worst_idx]:.3f}")
print(f"y_pred: {y_pred[worst_idx]:.3f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 11. SMAPE (Symmetric MAPE)</h2>
    <p>–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è MAPE</p>
    <pre><code>def smape(y_true, y_pred):
    """Symmetric Mean Absolute Percentage Error"""
    numerator = np.abs(y_true - y_pred)
    denominator = (np.abs(y_true) + np.abs(y_pred)) / 2
    
    # –ò–∑–±–µ–≥–∞–µ–º –¥–µ–ª–µ–Ω–∏—è –Ω–∞ 0
    mask = denominator != 0
    
    return 100 * np.mean(numerator[mask] / denominator[mask])

smape_score = smape(y_test, y_pred)
print(f"SMAPE: {smape_score:.2f}%")

# –î–∏–∞–ø–∞–∑–æ–Ω: [0, 200]
# –†–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ MAPE –ø—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è—Ö –±–ª–∏–∑–∫–∏—Ö –∫ 0</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 12. RMSLE (Root Mean Squared Log Error)</h2>
    <p>RMSE –≤ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–π —à–∫–∞–ª–µ</p>
    <pre><code>from sklearn.metrics import mean_squared_log_error
import numpy as np

# –¢—Ä–µ–±—É–µ—Ç y >= 0
rmsle = np.sqrt(mean_squared_log_error(y_test, y_pred))
print(f"RMSLE: {rmsle:.3f}")

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
def rmsle_score(y_true, y_pred):
    return np.sqrt(np.mean((np.log1p(y_pred) - np.log1p(y_true))**2))

# –ú–µ–Ω—å—à–µ —à—Ç—Ä–∞—Ñ—É–µ—Ç –Ω–µ–¥–æ–æ—Ü–µ–Ω–∫—É vs –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫—É
# –ü–æ–ª–µ–∑–Ω–∞ –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Ä–∞—Å—Ç—É—â–∏—Ö –≤–µ–ª–∏—á–∏–Ω</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 13. Explained Variance Score</h2>
    <pre><code>from sklearn.metrics import explained_variance_score

evs = explained_variance_score(y_test, y_pred)
print(f"Explained Variance: {evs:.3f}")

# –î–∏–∞–ø–∞–∑–æ–Ω: (-‚àû, 1]
# EVS = 1: –∏–¥–µ–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
# –ü–æ—Ö–æ–∂ –Ω–∞ R¬≤, –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–º–µ—â–µ–Ω–∏—è</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 14. –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏</h2>
    <table>
      <tr><th>–ó–∞–¥–∞—á–∞</th><th>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–µ—Ç—Ä–∏–∫–∞</th></tr>
      <tr><td>–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞</td><td>R¬≤, RMSE</td></tr>
      <tr><td>–ï—Å—Ç—å –≤—ã–±—Ä–æ—Å—ã</td><td>MAE, Median AE</td></tr>
      <tr><td>–ë–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã</td><td>MSE, RMSE</td></tr>
      <tr><td>–ù—É–∂–Ω—ã –ø—Ä–æ—Ü–µ–Ω—Ç—ã</td><td>MAPE, SMAPE</td></tr>
      <tr><td>–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç</td><td>RMSLE</td></tr>
      <tr><td>Worst-case –∞–Ω–∞–ª–∏–∑</td><td>Max Error</td></tr>
      <tr><td>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π</td><td>R¬≤, Adjusted R¬≤</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 15. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫</h2>
    <pre><code>import matplotlib.pyplot as plt

# Residual plot
residuals = y_test - y_pred

plt.figure(figsize=(12, 4))

# 1. Predicted vs Actual
plt.subplot(1, 3, 1)
plt.scatter(y_test, y_pred, alpha=0.5)
plt.plot([y_test.min(), y_test.max()], 
         [y_test.min(), y_test.max()], 
         'r--', lw=2)
plt.xlabel('–ò—Å—Ç–∏–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è')
plt.ylabel('–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è')
plt.title('Predicted vs Actual')

# 2. Residuals vs Predicted
plt.subplot(1, 3, 2)
plt.scatter(y_pred, residuals, alpha=0.5)
plt.axhline(y=0, color='r', linestyle='--')
plt.xlabel('–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è')
plt.ylabel('–û—Å—Ç–∞—Ç–∫–∏')
plt.title('Residual Plot')

# 3. Distribution of Residuals
plt.subplot(1, 3, 3)
plt.hist(residuals, bins=30, edgecolor='black')
plt.xlabel('–û—Å—Ç–∞—Ç–∫–∏')
plt.ylabel('–ß–∞—Å—Ç–æ—Ç–∞')
plt.title('–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤')

plt.tight_layout()
plt.show()</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 16. Cross-validation —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏</h2>
    <pre><code>from sklearn.model_selection import cross_validate

# –ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
scoring = {
    'mae': 'neg_mean_absolute_error',
    'mse': 'neg_mean_squared_error',
    'r2': 'r2'
}

cv_results = cross_validate(
    model, X, y,
    cv=5,
    scoring=scoring,
    return_train_score=True
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
for metric in ['mae', 'mse', 'r2']:
    train_scores = cv_results[f'train_{metric}']
    test_scores = cv_results[f'test_{metric}']
    
    # –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è neg_ –º–µ—Ç—Ä–∏–∫
    if metric != 'r2':
        train_scores = -train_scores
        test_scores = -test_scores
    
    print(f"{metric.upper()}:")
    print(f"  Train: {train_scores.mean():.3f} ¬± {train_scores.std():.3f}")
    print(f"  Test:  {test_scores.mean():.3f} ¬± {test_scores.std():.3f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 17. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫</h2>
    <table>
      <tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th><th>–•–æ—Ä–æ—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</th><th>–ü–ª–æ—Ö–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</th></tr>
      <tr><td><strong>MAE</strong></td><td>< 10% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞ y</td><td>> 30% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞ y</td></tr>
      <tr><td><strong>RMSE</strong></td><td>< 15% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞ y</td><td>> 40% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞ y</td></tr>
      <tr><td><strong>R¬≤</strong></td><td>> 0.7</td><td>< 0.3</td></tr>
      <tr><td><strong>MAPE</strong></td><td>< 10%</td><td>> 30%</td></tr>
    </table>
    <p><em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏!</em></p>
  </div>

  <div class="block">
    <h2>üî∑ 18. –û—à–∏–±–∫–∏ –ø–æ –∫–≤–∞–Ω—Ç–∏–ª—è–º</h2>
    <pre><code>import numpy as np
import pandas as pd

# –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –ø–æ –∫–≤–∞–Ω—Ç–∏–ª—è–º
errors = np.abs(y_test - y_pred)

percentiles = [10, 25, 50, 75, 90, 95, 99]
error_percentiles = np.percentile(errors, percentiles)

for p, e in zip(percentiles, error_percentiles):
    print(f"{p}% –æ—à–∏–±–æ–∫ <= {e:.3f}")

# –ò–ª–∏ —á–µ—Ä–µ–∑ DataFrame
error_df = pd.DataFrame({
    'y_true': y_test,
    'y_pred': y_pred,
    'error': errors,
    'pct_error': 100 * errors / np.abs(y_test)
})

print("\n–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫:")
print(error_df['error'].describe())</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 19. –ß–µ–∫-–ª–∏—Å—Ç</h2>
    <ul>
      <li>[ ] –í—Å–µ–≥–¥–∞ –≤—ã—á–∏—Å–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫</li>
      <li>[ ] R¬≤ –¥–ª—è –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–∏</li>
      <li>[ ] MAE/RMSE –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –æ—à–∏–±–∫–∏</li>
      <li>[ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤</li>
      <li>[ ] –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å predicted vs actual</li>
      <li>[ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å max error (worst case)</li>
      <li>[ ] –î–ª—è –≤—ã–±—Ä–æ—Å–æ–≤: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MAE</li>
      <li>[ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—é</li>
      <li>[ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏</li>
    </ul>

    <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É:</h3>
    <blockquote>
      ¬´–ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏. MAE ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞ –≤ —Ä—É–±–ª—è—Ö (–∏–ª–∏ –¥—Ä—É–≥–∏—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö), R¬≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏ –æ–±—ä—è—Å–Ω—è–µ—Ç –º–æ–¥–µ–ª—å, –∞ MAPE ‚Äî –æ—à–∏–±–∫—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö¬ª.
    </blockquote>
  </div>

</div>

</div>
</body>
</html>
