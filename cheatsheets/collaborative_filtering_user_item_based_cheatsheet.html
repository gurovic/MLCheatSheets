<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (user-based, item-based) Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

        .container {
      max-width: 100%;
    }

    /* Responsive columns: 3 columns on wide screens, fewer on narrow */
    @media (min-width: 900px) {
      .container {
        column-count: 3;
        column-gap: 20px;
      }
    }
    
    @media (min-width: 600px) and (max-width: 899px) {
      .container {
        column-count: 2;
        column-gap: 20px;
      }
    }
    
    @media (max-width: 599px) {
      .container {
        column-count: 1;
      }
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.88em;
      margin: 6px 0;
    }

    th, td {
      padding: 6px 8px;
      text-align: left;
      border: 1px solid #e0e7ff;
    }

    th {
      background-color: #1a5fb4;
      color: white;
      font-weight: 700;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üë• –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: User-based & Item-based</h1>
  <div class="subtitle">üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –°—É—Ç—å –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</h2>
    <p><strong>Collaborative Filtering (CF)</strong>: —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤</p>
    <ul>
      <li><strong>–ò–¥–µ—è</strong>: "–õ—é–¥–∏, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –≤–∞—Å, –≤—ã–±–∏—Ä–∞—é—Ç —ç—Ç–æ"</li>
      <li><strong>–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</strong>: –º–∞—Ç—Ä–∏—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–æ–±—ä–µ–∫—Ç (—Ä–µ–π—Ç–∏–Ω–≥–∏, –∫–ª–∏–∫–∏, –ø–æ–∫—É–ø–∫–∏)</li>
      <li><strong>–î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞</strong>: User-based CF –∏ Item-based CF</li>
      <li><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</strong>: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏–π –æ –∫–æ–Ω—Ç–µ–Ω—Ç–µ, –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º</li>
      <li><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏</strong>: cold start, –ø—Ä–æ–±–ª–µ–º–∞ —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö</li>
    </ul>
    <blockquote>
      üí° CF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç "–º—É–¥—Ä–æ—Å—Ç—å —Ç–æ–ª–ø—ã" –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    </blockquote>

  <div class="block">
    <h2>üî∑ 2. User-based Collaborative Filtering</h2>
    <p><strong>–ü–æ–¥—Ö–æ–¥</strong>: –Ω–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è –∏–º</p>
    <pre><code><strong>–ê–ª–≥–æ—Ä–∏—Ç–º:</strong>
1. –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
2. –ù–∞–π—Ç–∏ k –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–æ—Å–µ–¥–µ–π)
3. –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Ä–µ–π—Ç–∏–Ω–≥–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
4. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å —Ç–æ–ø-N –æ–±—ä–µ–∫—Ç–æ–≤

<strong>–§–æ—Ä–º—É–ª–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:</strong>
rÃÇ_ui = rÃÑ_u + Œ£(sim(u,v) * (r_vi - rÃÑ_v)) / Œ£|sim(u,v)|

–≥–¥–µ:
rÃÇ_ui - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è u –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ i
rÃÑ_u - —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è u
sim(u,v) - —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ u –∏ v
r_vi - —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è v –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ i</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 3. Item-based Collaborative Filtering</h2>
    <p><strong>–ü–æ–¥—Ö–æ–¥</strong>: —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ç–µ, —á—Ç–æ –Ω—Ä–∞–≤—è—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é</p>
    <pre><code><strong>–ê–ª–≥–æ—Ä–∏—Ç–º:</strong>
1. –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é,
   –Ω–∞–π—Ç–∏ k –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
3. –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
4. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å —Ç–æ–ø-N –æ–±—ä–µ–∫—Ç–æ–≤

<strong>–§–æ—Ä–º—É–ª–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è:</strong>
rÃÇ_ui = Œ£(sim(i,j) * r_uj) / Œ£|sim(i,j)|

–≥–¥–µ:
sim(i,j) - —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ i –∏ j
r_uj - —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è u –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ j</code></pre>
    <blockquote>
      üí° Item-based CF —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –∏–∑-–∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å—Ö–æ–∂–µ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤
    </blockquote>
  </div>

  <div class="block">
    <h2>üî∑ 4. –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ö–æ–∂–µ—Å—Ç–∏</h2>
    <table>
      <tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th><th>–§–æ—Ä–º—É–ª–∞</th><th>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</th></tr>
      <tr><td><strong>–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ</strong></td><td>cos(u,v) = (u¬∑v)/(||u||¬∑||v||)</td><td>–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –º–∞—Å—à—Ç–∞–±</td></tr>
      <tr><td><strong>–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ü–∏—Ä—Å–æ–Ω–∞</strong></td><td>œÅ = Œ£((x-xÃÑ)(y-»≥)) / ‚àö(Œ£(x-xÃÑ)¬≤¬∑Œ£(y-»≥)¬≤)</td><td>–£—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è</td></tr>
      <tr><td><strong>Adjusted Cosine</strong></td><td>–ö–æ—Å–∏–Ω—É—Å —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å—Ä–µ–¥–Ω–∏–º</td><td>–î–ª—è item-based CF</td></tr>
      <tr><td><strong>Jaccard</strong></td><td>|A‚à©B| / |A‚à™B|</td><td>–î–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 5. User-based CF: Python —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è</h2>
    <pre><code>import numpy as np
from sklearn.metrics.pairwise import cosine_similarity
import pandas as pd

# –ú–∞—Ç—Ä–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ x –æ–±—ä–µ–∫—Ç—ã)
# 0 –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
ratings = np.array([
    [5, 3, 0, 1],
    [4, 0, 0, 1],
    [1, 1, 0, 5],
    [1, 0, 0, 4],
    [0, 1, 5, 4],
])

# –í—ã—á–∏—Å–ª—è–µ–º —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
# –ó–∞–º–µ–Ω—è–µ–º 0 –Ω–∞ NaN –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞
ratings_for_sim = ratings.copy().astype(float)
ratings_for_sim[ratings_for_sim == 0] = np.nan

# –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (–∑–∞–º–µ–Ω–∞ NaN –Ω–∞ 0)
user_sim = cosine_similarity(
    np.nan_to_num(ratings_for_sim)
)

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 0, –æ–±—ä–µ–∫—Ç–∞ 2
def predict_rating(user_id, item_id, ratings, user_sim, k=2):
    # –ù–∞—Ö–æ–¥–∏–º k –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    sim_scores = user_sim[user_id].copy()
    sim_scores[user_id] = -1  # –ò—Å–∫–ª—é—á–∞–µ–º —Å–∞–º–æ–≥–æ —Å–µ–±—è
    
    # –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ü–µ–Ω–∏–≤—à–∏—Ö –¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
    rated_mask = ratings[:, item_id] > 0
    sim_scores[~rated_mask] = -1
    
    # –¢–æ–ø-k –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    top_k_users = np.argsort(sim_scores)[-k:][::-1]
    
    # –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
    weights = user_sim[user_id, top_k_users]
    ratings_by_neighbors = ratings[top_k_users, item_id]
    
    if weights.sum() == 0:
        return ratings[user_id][ratings[user_id] > 0].mean()
    
    pred = np.dot(weights, ratings_by_neighbors) / weights.sum()
    return pred

# –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥
pred = predict_rating(0, 2, ratings, user_sim, k=2)
print(f"–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: {pred:.2f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 6. Item-based CF: Python —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è</h2>
    <pre><code>import numpy as np
from sklearn.metrics.pairwise import cosine_similarity

# –í—ã—á–∏—Å–ª—è–µ–º —Å—Ö–æ–∂–µ—Å—Ç—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
# –¢—Ä–∞–Ω—Å–ø–æ–Ω–∏—Ä—É–µ–º –º–∞—Ç—Ä–∏—Ü—É (–æ–±—ä–µ–∫—Ç—ã x –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
item_sim = cosine_similarity(
    np.nan_to_num(ratings_for_sim.T)
)

def predict_rating_item_based(user_id, item_id, ratings, 
                               item_sim, k=2):
    # –ù–∞—Ö–æ–¥–∏–º –æ–±—ä–µ–∫—Ç—ã, –æ—Ü–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    user_ratings = ratings[user_id]
    rated_items = np.where(user_ratings > 0)[0]
    
    if len(rated_items) == 0:
        return ratings[:, item_id][ratings[:, item_id] > 0].mean()
    
    # –°—Ö–æ–∂–µ—Å—Ç—å —Å –æ—Ü–µ–Ω–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
    sim_scores = item_sim[item_id, rated_items]
    
    # –¢–æ–ø-k –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
    top_k_idx = np.argsort(sim_scores)[-k:][::-1]
    top_k_items = rated_items[top_k_idx]
    
    # –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ
    weights = item_sim[item_id, top_k_items]
    ratings_by_user = user_ratings[top_k_items]
    
    if weights.sum() == 0:
        return user_ratings[user_ratings > 0].mean()
    
    pred = np.dot(weights, ratings_by_user) / weights.sum()
    return pred

# –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥
pred_item = predict_rating_item_based(0, 2, ratings, item_sim, k=2)
print(f"–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (item-based): {pred_item:.2f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Surprise</h2>
    <pre><code>from surprise import KNNBasic, Dataset, Reader
from surprise.model_selection import cross_validate

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
data = [
    ('user1', 'item1', 5),
    ('user1', 'item2', 3),
    ('user2', 'item1', 4),
    ('user2', 'item4', 1),
    ('user3', 'item1', 1),
    # ... –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö
]

reader = Reader(rating_scale=(1, 5))
dataset = Dataset.load_from_df(
    pd.DataFrame(data, columns=['user', 'item', 'rating']),
    reader
)

# User-based CF
user_based = KNNBasic(
    k=40,
    sim_options={
        'name': 'cosine',
        'user_based': True
    }
)

# Item-based CF
item_based = KNNBasic(
    k=40,
    sim_options={
        'name': 'cosine',
        'user_based': False
    }
)

# –ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è
cv_results_user = cross_validate(user_based, dataset, 
                                  measures=['RMSE', 'MAE'], 
                                  cv=5, verbose=True)

cv_results_item = cross_validate(item_based, dataset,
                                  measures=['RMSE', 'MAE'],
                                  cv=5, verbose=True)

# –û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
trainset = dataset.build_full_trainset()
user_based.fit(trainset)

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–±—ä–µ–∫—Ç–∞
prediction = user_based.predict('user1', 'item3')
print(f"Predicted rating: {prediction.est:.2f}")</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ User-based vs Item-based</h2>
    <table>
      <tr><th>–ê—Å–ø–µ–∫—Ç</th><th>User-based</th><th>Item-based</th></tr>
      <tr><td><strong>–°—Ö–æ–∂–µ—Å—Ç—å</strong></td><td>–ú–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</td><td>–ú–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏</td></tr>
      <tr><td><strong>–í—ã—á–∏—Å–ª–µ–Ω–∏—è</strong></td><td>–î–æ—Ä–æ–∂–µ (–±–æ–ª—å—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)</td><td>–î–µ—à–µ–≤–ª–µ (–º–µ–Ω—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤)</td></tr>
      <tr><td><strong>–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</strong></td><td>–ú–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ</td><td>–ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞</td></tr>
      <tr><td><strong>–û–±—ä—è—Å–Ω–∏–º–æ—Å—Ç—å</strong></td><td>"–õ—é–¥–∏ –∫–∞–∫ –≤—ã –∫—É–ø–∏–ª–∏..."</td><td>"–ü–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, —á—Ç–æ –≤—ã –ª—é–±–∏—Ç–µ"</td></tr>
      <tr><td><strong>–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</strong></td><td>–•—É–∂–µ</td><td>–õ—É—á—à–µ</td></tr>
      <tr><td><strong>Cold start</strong></td><td>–ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</td><td>–ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–æ–≤—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 9. –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è</h2>
    <p><strong>1. Cold Start (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)</strong></p>
    <ul>
      <li><strong>–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</strong>: –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –æ–ø—Ä–æ—Å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</li>
      <li><strong>–ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç</strong>: –≥–∏–±—Ä–∏–¥–Ω—ã–µ –º–µ—Ç–æ–¥—ã, content-based –ø–æ–¥—Ö–æ–¥</li>
    </ul>
    <p><strong>2. –†–∞–∑—Ä–µ–∂–µ–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (Sparsity)</strong></p>
    <ul>
      <li>–ú–∞—Ç—Ä–∏—á–Ω–∞—è —Ñ–∞–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (SVD, NMF)</li>
      <li>–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏</li>
      <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—è–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –∫–ª–∏–∫–∏)</li>
    </ul>
    <p><strong>3. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</strong></p>
    <ul>
      <li>Approximate Nearest Neighbors (ANN)</li>
      <li>–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–æ–±—ä–µ–∫—Ç–æ–≤</li>
      <li>–õ–æ–∫–∞–ª—å–Ω–æ-—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (LSH)</li>
    </ul>
    <p><strong>4. –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</strong></p>
    <ul>
      <li>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏</li>
      <li>–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–ø-N —Å–ø–∏—Å–∫–∞</li>
      <li>Exploration-exploitation –±–∞–ª–∞–Ω—Å</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 10. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è</h2>
    <p><strong>1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</strong></p>
    <pre><code># –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
centered = ratings - ratings.mean(axis=1, keepdims=True)

# Z-score –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
from scipy import stats
normalized = stats.zscore(ratings, axis=1, nan_policy='omit')</code></pre>
    <p><strong>2. –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞</strong></p>
    <pre><code># –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
import datetime as dt

def time_decay_weight(timestamp, current_time, half_life=30):
    """half_life –≤ –¥–Ω—è—Ö"""
    days_diff = (current_time - timestamp).days
    return 0.5 ** (days_diff / half_life)</code></pre>
    <p><strong>3. –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã</strong></p>
    <ul>
      <li>–£—á–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</li>
      <li>Implicit negative feedback (–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã)</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 11. –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞</h2>
    <p><strong>–ú–µ—Ç—Ä–∏–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏</strong></p>
    <ul>
      <li><strong>RMSE</strong>: ‚àö(Œ£(r - rÃÇ)¬≤ / n)</li>
      <li><strong>MAE</strong>: Œ£|r - rÃÇ| / n</li>
      <li><strong>Precision@K</strong>: –¥–æ–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤ —Ç–æ–ø-K</li>
      <li><strong>Recall@K</strong>: –¥–æ–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö</li>
      <li><strong>NDCG</strong>: normalized discounted cumulative gain</li>
    </ul>
    <pre><code>from sklearn.metrics import mean_squared_error, mean_absolute_error

# RMSE
rmse = np.sqrt(mean_squared_error(true_ratings, predicted_ratings))

# MAE
mae = mean_absolute_error(true_ratings, predicted_ratings)

# Precision@K
def precision_at_k(recommended, relevant, k):
    recommended_k = recommended[:k]
    return len(set(recommended_k) & set(relevant)) / k

# Coverage (–ø–æ–∫—Ä—ã—Ç–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞)
def catalog_coverage(recommendations, catalog_size):
    unique_recommended = set()
    for recs in recommendations:
        unique_recommended.update(recs)
    return len(unique_recommended) / catalog_size</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 12. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã</h2>
    <ul>
      <li><strong>–í—ã–±–æ—Ä k</strong>: –æ–±—ã—á–Ω–æ 20-50 —Å–æ—Å–µ–¥–µ–π, –ø–æ–¥–±–∏—Ä–∞—Ç—å –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</li>
      <li><strong>–ü—Ä–µ–¥–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ</strong>: —Å—Ö–æ–∂–µ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ</li>
      <li><strong>–ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏</strong>: –æ—Ç—Å–µ–∫–∞—Ç—å —Å–ª–∞–±–æ –ø–æ—Ö–æ–∂–∏—Ö —Å–æ—Å–µ–¥–µ–π</li>
      <li><strong>–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞</strong>: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤</li>
      <li><strong>A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö</li>
      <li><strong>–ì–∏–±—Ä–∏–¥–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã</strong>: –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å content-based</li>
      <li><strong>–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</strong>: –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Å –Ω—É–ª—è</li>
      <li><strong>–ö–æ–Ω—Ç–µ–∫—Å—Ç</strong>: —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Ä–µ–º—è, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</li>
    </ul>
    <blockquote>
      üí° Item-based CF —á–∞—Å—Ç–æ –≤—ã–±–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è production —Å–∏—Å—Ç–µ–º
    </blockquote>
  </div>

</div>

</div>
</body>
</html>
