<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Object Tracking in Video Cheatsheet ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</title>
  <style>
    @media screen {
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        color: #333;
        background: #fafcff;
        padding: 10px;
      }
    }
    @media print {
      body {
        background: white;
        padding: 0;
      }
      @page {
        size: A4 landscape;
        margin: 10mm;
      }
    }

    .container {
      column-count: 3;
      column-gap: 20px;
      max-width: 100%;
    }

    .block {
      break-inside: avoid;
      margin-bottom: 1.2em;
      padding: 12px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    h1 {
      font-size: 1.6em;
      font-weight: 700;
      color: #1a5fb4;
      text-align: center;
      margin: 0 0 8px;
      column-span: all;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-bottom: 12px;
      column-span: all;
    }

    h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a5fb4;
      margin: 0 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #e0e7ff;
    }

    p, ul, ol {
      font-size: 0.92em;
      margin: 0.6em 0;
    }

    ul, ol {
      padding-left: 18px;
    }

    li {
      margin-bottom: 4px;
    }

    code {
      font-family: 'Consolas', 'Courier New', monospace;
      background-color: #f0f4ff;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.88em;
    }

    pre {
      background-color: #f0f4ff;
      padding: 8px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.84em;
      margin: 6px 0;
    }

    pre code {
      padding: 0;
      background: none;
      white-space: pre-wrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82em;
      margin: 6px 0;
    }

    th {
      background-color: #e6f0ff;
      text-align: left;
      padding: 4px 6px;
      font-weight: 600;
    }

    td {
      padding: 4px 6px;
      border-bottom: 1px solid #f0f4ff;
    }

    tr:nth-child(even) {
      background-color: #f8fbff;
    }

    .good-vs-bad {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .good-vs-bad div {
      flex: 1;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .good {
      background-color: #f0f9f4;
      border-left: 3px solid #2e8b57;
    }

    .bad {
      background-color: #fdf0f2;
      border-left: 3px solid #d32f2f;
    }

    .good h3, .bad h3 {
      margin: 0 0 4px;
      font-size: 1em;
      font-weight: 700;
    }

    .good ul, .bad ul {
      padding-left: 20px;
      margin: 0;
    }

    .good li::before { content: "‚úÖ "; font-weight: bold; }
    .bad li::before { content: "‚ùå "; font-weight: bold; }

    blockquote {
      font-style: italic;
      margin: 8px 0;
      padding: 6px 10px;
      background: #f8fbff;
      border-left: 2px solid #1a5fb4;
      font-size: 0.88em;
    }

    @media print {
      .container { column-gap: 12px; }
      .block { box-shadow: none; }
      code, pre, table { font-size: 0.78em; }
      h1 { font-size: 1.4em; }
      h2 { font-size: 1em; }
    }
  </style>
</head>
<body>

<div class="container">

  <h1>üé¨ Object Tracking in Video Cheatsheet</h1>
  <div class="subtitle">–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö ‚Ä¢ –ë–µ–∑ —Å–ª–æ–∂–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ ‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å<br>üìÖ –Ø–Ω–≤–∞—Ä—å 2026</div>

  <div class="block">
    <h2>üî∑ 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Object Tracking?</h2>
    <ul>
      <li><strong>–¶–µ–ª—å</strong>: –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –≤ –≤–∏–¥–µ–æ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li>
      <li><strong>–í—Ö–æ–¥</strong>: –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä —Å bounding box –æ–±—ä–µ–∫—Ç–∞</li>
      <li><strong>–í—ã—Ö–æ–¥</strong>: –ø–æ–∑–∏—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –≤—Å–µ—Ö –∫–∞–¥—Ä–∞—Ö</li>
      <li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –∞–≤—Ç–æ, —Å–ø–æ—Ä—Ç, AR/VR</li>
      <li><strong>–ü—Ä–æ–±–ª–µ–º—ã</strong>: –æ–∫–∫–ª—é–∑–∏–∏, —Å–º–µ–Ω–∞ –º–∞—Å—à—Ç–∞–±–∞, –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ—Å–≤–µ—â–µ–Ω–∏–µ</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 2. –¢–∏–ø—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞</h2>
    <table>
      <tr><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th></tr>
      <tr><td><strong>Single Object Tracking (SOT)</strong></td><td>–û–¥–∏–Ω –æ–±—ä–µ–∫—Ç</td><td>–°—Ä–µ–¥–Ω—è—è</td></tr>
      <tr><td><strong>Multiple Object Tracking (MOT)</strong></td><td>–ù–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤</td><td>–í—ã—Å–æ–∫–∞—è</td></tr>
      <tr><td><strong>Online</strong></td><td>–¢–æ–ª—å–∫–æ –ø—Ä–æ—à–ª—ã–µ –∫–∞–¥—Ä—ã</td><td>Real-time</td></tr>
      <tr><td><strong>Offline</strong></td><td>–í—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</td><td>–¢–æ—á–Ω–µ–µ</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 3. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã</h2>
    <p><strong>–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è–û—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:</strong></p>
    <ul>
      <li><strong>Template Matching</strong>: –ø–æ–∏—Å–∫ template –≤ –Ω–æ–≤–æ–º –∫–∞–¥—Ä–µ</li>
      <li><strong>Lucas-Kanade</strong>: optical flow tracking</li>
      <li><strong>Mean-Shift</strong>: –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –º–∞–∫—Å–∏–º—É–º–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏</li>
      <li><strong>CAMShift</strong>: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π Mean-Shift —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 4. OpenCV Trackers</h2>
    <pre><code>import cv2

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ
cap = cv2.VideoCapture('video.mp4')
ret, frame = cap.read()

# –í—ã–±–æ—Ä ROI (Region of Interest)
bbox = cv2.selectROI('Frame', frame, False)

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–∫–µ—Ä–∞
tracker = cv2.TrackerKCF_create()
# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
# tracker = cv2.TrackerCSRT_create()  # –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π
# tracker = cv2.TrackerMOSSE_create()  # –±—ã—Å—Ç—Ä—ã–π
# tracker = cv2.TrackerMIL_create()
# tracker = cv2.TrackerBoosting_create()

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
tracker.init(frame, bbox)

while True:
    ret, frame = cap.read()
    if not ret:
        break
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–µ—Ä–∞
    success, bbox = tracker.update(frame)
    
    if success:
        x, y, w, h = [int(v) for v in bbox]
        cv2.rectangle(frame, (x, y), (x+w, y+h), (0, 255, 0), 2)
    else:
        cv2.putText(frame, "Tracking failed", (50, 80),
                   cv2.FONT_HERSHEY_SIMPLEX, 0.75, (0, 0, 255), 2)
    
    cv2.imshow('Tracking', frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 5. KCF (Kernelized Correlation Filters)</h2>
    <ul>
      <li><strong>–ò–¥–µ—è</strong>: –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –≤ —á–∞—Å—Ç–æ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</li>
      <li><strong>–°–∫–æ—Ä–æ—Å—Ç—å</strong>: –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π (~200 FPS)</li>
      <li><strong>–¢–æ—á–Ω–æ—Å—Ç—å</strong>: —Ö–æ—Ä–æ—à–∞—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤</li>
      <li><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫</strong>: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ–∫–∫–ª—é–∑–∏—è—Ö</li>
    </ul>
    <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</strong>:</p>
    <ul>
      <li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç HOG features</li>
      <li>Kernel trick –¥–ª—è –Ω–µ–ª–∏–Ω–µ–π–Ω–æ—Å—Ç–∏</li>
      <li>Fast Fourier Transform –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 6. Deep Learning —Ç—Ä–µ–∫–µ—Ä—ã</h2>
    <table>
      <tr><th>–ú–µ—Ç–æ–¥</th><th>–ì–æ–¥</th><th>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</th></tr>
      <tr><td><strong>MDNet</strong></td><td>2016</td><td>–û–Ω–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏–µ CNN</td></tr>
      <tr><td><strong>SiamFC</strong></td><td>2016</td><td>Siamese —Å–µ—Ç—å, fast</td></tr>
      <tr><td><strong>SiamRPN</strong></td><td>2018</td><td>Siamese + Region Proposal</td></tr>
      <tr><td><strong>DiMP</strong></td><td>2019</td><td>Discriminative model prediction</td></tr>
      <tr><td><strong>TransT</strong></td><td>2021</td><td>Transformer –¥–ª—è tracking</td></tr>
      <tr><td><strong>OSTrack</strong></td><td>2022</td><td>One-stream tracker</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 7. Siamese Networks –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞</h2>
    <p><strong>–ò–¥–µ—è</strong>: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ template —Å search region</p>
    <pre><code>import torch
import torch.nn as nn

class SiameseTracker(nn.Module):
    def __init__(self):
        super().__init__()
        # –û–±—â–∞—è feature extraction —Å–µ—Ç—å
        self.backbone = nn.Sequential(
            nn.Conv2d(3, 64, 3, padding=1),
            nn.ReLU(),
            nn.MaxPool2d(2),
            nn.Conv2d(64, 128, 3, padding=1),
            nn.ReLU(),
            nn.MaxPool2d(2),
            nn.Conv2d(128, 256, 3, padding=1),
            nn.ReLU()
        )
    
    def forward(self, template, search):
        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
        z = self.backbone(template)  # (B, 256, H/4, W/4)
        x = self.backbone(search)    # (B, 256, H'/4, W'/4)
        
        # Cross-correlation
        response = self.cross_correlation(z, x)
        
        return response
    
    def cross_correlation(self, z, x):
        # z: template features
        # x: search region features
        batch = x.shape[0]
        channels = x.shape[1]
        
        # Reshape –¥–ª—è convolution
        z = z.view(1, -1, z.size(2), z.size(3))
        x = x.view(1, -1, x.size(2), x.size(3))
        
        # Cross-correlation –∫–∞–∫ convolution
        response = nn.functional.conv2d(x, z, groups=batch)
        
        return response

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
model = SiameseTracker()
template = torch.randn(1, 3, 127, 127)  # –æ–±—ä–µ–∫—Ç
search = torch.randn(1, 3, 255, 255)    # –ø–æ–∏—Å–∫
response = model(template, search)
# –ú–∞–∫—Å–∏–º—É–º response —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –æ–±—ä–µ–∫—Ç–∞</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 8. SiamRPN (Region Proposal Network)</h2>
    <p><strong>–£–ª—É—á—à–µ–Ω–∏–µ</strong>: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ RPN –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ bbox</p>
    <pre><code>class SiamRPN(nn.Module):
    def __init__(self):
        super().__init__()
        self.backbone = ResNet50()  # feature extractor
        
        # RPN heads
        self.cls_head = nn.Conv2d(256, 2*5, 1)  # 5 anchors, 2 classes
        self.reg_head = nn.Conv2d(256, 4*5, 1)  # 5 anchors, 4 coords
    
    def forward(self, template, search):
        z = self.backbone(template)
        x = self.backbone(search)
        
        # Cross-correlation
        cls_feat = self.cross_corr(z, x, self.cls_head)
        reg_feat = self.cross_corr(z, x, self.reg_head)
        
        # Classification –∏ regression
        cls_score = cls_feat.view(-1, 2, 5, cls_feat.size(2), cls_feat.size(3))
        bbox_pred = reg_feat.view(-1, 4, 5, reg_feat.size(2), reg_feat.size(3))
        
        return cls_score, bbox_pred
    
    def cross_corr(self, kernel, search, head):
        # Depth-wise cross-correlation
        kernel = head(kernel)
        search = self.backbone.last_conv(search)
        
        batch = search.shape[0]
        channel = search.shape[1]
        
        kernel = kernel.view(batch, channel, -1).transpose(1, 2)
        search = search.view(batch, channel, -1)
        
        response = torch.matmul(kernel, search)
        return response.view(batch, -1, search.size(2), search.size(3))</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 9. Multiple Object Tracking (MOT)</h2>
    <p><strong>–ó–∞–¥–∞—á–∞</strong>: –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</p>
    <ul>
      <li><strong>Detection + Association</strong>: –¥–µ—Ç–µ–∫—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞ + —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ</li>
      <li><strong>SORT</strong>: Simple Online Realtime Tracking</li>
      <li><strong>DeepSORT</strong>: SORT + appearance features</li>
      <li><strong>FairMOT</strong>: One-shot detection + embedding</li>
      <li><strong>ByteTrack</strong>: –Ω–∏–∑–∫–∏–µ confidence –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ç–æ–∂–µ</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 10. DeepSORT –∞–ª–≥–æ—Ä–∏—Ç–º</h2>
    <pre><code>class DeepSORT:
    def __init__(self):
        self.detector = YOLOv5()  # –∏–ª–∏ Faster R-CNN
        self.tracker = KalmanFilter()
        self.feature_extractor = ResNet()  # –¥–ª—è appearance
        self.max_age = 30  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±–µ–∑ –¥–µ—Ç–µ–∫—Ü–∏–∏
        self.min_hits = 3  # –º–∏–Ω–∏–º—É–º –¥–µ—Ç–µ–∫—Ü–∏–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        self.iou_threshold = 0.3
        
        self.tracks = []  # –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–∫–∏
        self.next_id = 0
    
    def update(self, frame):
        # 1. –î–µ—Ç–µ–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
        detections = self.detector(frame)
        
        # 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ appearance features
        features = []
        for det in detections:
            crop = frame[det.y1:det.y2, det.x1:det.x2]
            feat = self.feature_extractor(crop)
            features.append(feat)
        
        # 3. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç—Ä–µ–∫–æ–≤
        for track in self.tracks:
            track.predict()
        
        # 4. –ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è (Hungarian algorithm)
        matched, unmatched_dets, unmatched_tracks = \
            self.associate(detections, features, self.tracks)
        
        # 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ matched —Ç—Ä–µ–∫–æ–≤
        for track_idx, det_idx in matched:
            self.tracks[track_idx].update(detections[det_idx], 
                                         features[det_idx])
        
        # 6. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤
        for det_idx in unmatched_dets:
            if len(self.tracks) < self.max_tracks:
                new_track = Track(self.next_id, detections[det_idx], 
                                features[det_idx])
                self.tracks.append(new_track)
                self.next_id += 1
        
        # 7. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ç—Ä–µ–∫–æ–≤
        self.tracks = [t for t in self.tracks if t.age < self.max_age]
        
        return self.tracks
    
    def associate(self, detections, features, tracks):
        # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ cost matrix (IoU + appearance)
        cost_matrix = np.zeros((len(tracks), len(detections)))
        
        for i, track in enumerate(tracks):
            for j, det in enumerate(detections):
                iou = self.compute_iou(track.bbox, det.bbox)
                appearance = self.cosine_distance(track.feature, features[j])
                cost_matrix[i, j] = 0.5 * (1 - iou) + 0.5 * appearance
        
        # Hungarian algorithm –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏
        from scipy.optimize import linear_sum_assignment
        row_ind, col_ind = linear_sum_assignment(cost_matrix)
        
        # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É
        matched = []
        unmatched_dets = set(range(len(detections)))
        unmatched_tracks = set(range(len(tracks)))
        
        for i, j in zip(row_ind, col_ind):
            if cost_matrix[i, j] < 0.7:
                matched.append((i, j))
                unmatched_dets.discard(j)
                unmatched_tracks.discard(i)
        
        return matched, list(unmatched_dets), list(unmatched_tracks)</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 11. Kalman Filter –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞</h2>
    <pre><code>import numpy as np
from filterpy.kalman import KalmanFilter

class KalmanBoxTracker:
    """Kalman Filter –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ bbox"""
    
    def __init__(self, bbox):
        # State: [x, y, s, r, vx, vy, vs]
        # x, y - —Ü–µ–Ω—Ç—Ä, s - –ø–ª–æ—â–∞–¥—å, r - aspect ratio
        # vx, vy, vs - —Å–∫–æ—Ä–æ—Å—Ç–∏
        
        self.kf = KalmanFilter(dim_x=7, dim_z=4)
        
        # –ú–∞—Ç—Ä–∏—Ü–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞
        self.kf.F = np.array([
            [1,0,0,0,1,0,0],
            [0,1,0,0,0,1,0],
            [0,0,1,0,0,0,1],
            [0,0,0,1,0,0,0],
            [0,0,0,0,1,0,0],
            [0,0,0,0,0,1,0],
            [0,0,0,0,0,0,1]
        ])
        
        # –ú–∞—Ç—Ä–∏—Ü–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
        self.kf.H = np.array([
            [1,0,0,0,0,0,0],
            [0,1,0,0,0,0,0],
            [0,0,1,0,0,0,0],
            [0,0,0,1,0,0,0]
        ])
        
        # –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–∏
        self.kf.R *= 10.0  # measurement uncertainty
        self.kf.P[4:, 4:] *= 1000.0  # high uncertainty for velocities
        self.kf.Q[-1, -1] *= 0.01
        self.kf.Q[4:, 4:] *= 0.01
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        self.kf.x[:4] = self.bbox_to_z(bbox)
    
    def predict(self):
        """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
        self.kf.predict()
        return self.z_to_bbox(self.kf.x)
    
    def update(self, bbox):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º"""
        self.kf.update(self.bbox_to_z(bbox))
    
    def bbox_to_z(self, bbox):
        """[x1, y1, x2, y2] ‚Üí [cx, cy, s, r]"""
        w = bbox[2] - bbox[0]
        h = bbox[3] - bbox[1]
        cx = bbox[0] + w/2
        cy = bbox[1] + h/2
        s = w * h
        r = w / h
        return np.array([cx, cy, s, r])
    
    def z_to_bbox(self, z):
        """[cx, cy, s, r] ‚Üí [x1, y1, x2, y2]"""
        w = np.sqrt(z[2] * z[3])
        h = z[2] / w
        x1 = z[0] - w/2
        y1 = z[1] - h/2
        x2 = z[0] + w/2
        y2 = z[1] + h/2
        return np.array([x1, y1, x2, y2])</code></pre>
  </div>

  <div class="block">
    <h2>üî∑ 12. –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏</h2>
    <table>
      <tr><th>–ú–µ—Ç—Ä–∏–∫–∞</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–î–∏–∞–ø–∞–∑–æ–Ω</th></tr>
      <tr><td><strong>Success Rate</strong></td><td>–î–æ–ª—è –∫–∞–¥—Ä–æ–≤ —Å IoU > –ø–æ—Ä–æ–≥</td><td>[0, 1]</td></tr>
      <tr><td><strong>Precision</strong></td><td>–°—Ä–µ–¥–Ω—è—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è —Ü–µ–Ω—Ç—Ä–æ–≤</td><td>[0, ‚àû)</td></tr>
      <tr><td><strong>MOTA</strong></td><td>Multiple Object Tracking Accuracy</td><td>(-‚àû, 1]</td></tr>
      <tr><td><strong>MOTP</strong></td><td>Multiple Object Tracking Precision</td><td>[0, ‚àû)</td></tr>
      <tr><td><strong>IDF1</strong></td><td>ID F1 score (–∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏)</td><td>[0, 1]</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 13. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã</h2>
    <ul>
      <li><strong>–í—ã–±–æ—Ä —Ç—Ä–µ–∫–µ—Ä–∞</strong>:
        <ul>
          <li>Real-time: KCF, MOSSE, SiamFC</li>
          <li>–¢–æ—á–Ω–æ—Å—Ç—å: CSRT, DiMP, TransT</li>
          <li>–ö–æ–º–ø—Ä–æ–º–∏—Å—Å: SiamRPN++</li>
        </ul>
      </li>
      <li><strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫–∫–ª—é–∑–∏–π</strong>: —Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N features</li>
      <li><strong>Re-detection</strong>: –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏</li>
      <li><strong>–ú–∞—Å—à—Ç–∞–±</strong>: –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ search region</li>
      <li><strong>–£—Å–∫–æ—Ä–µ–Ω–∏–µ</strong>: —É–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU</li>
    </ul>
  </div>

  <div class="block">
    <h2>üî∑ 14. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã</h2>
    <table>
      <tr><th>–î–∞—Ç–∞—Å–µ—Ç</th><th>–¢–∏–ø</th><th>–í–∏–¥–µ–æ</th><th>–û–±—ä–µ–∫—Ç—ã</th></tr>
      <tr><td><strong>OTB</strong></td><td>SOT</td><td>100</td><td>1</td></tr>
      <tr><td><strong>VOT</strong></td><td>SOT</td><td>60</td><td>1</td></tr>
      <tr><td><strong>LaSOT</strong></td><td>SOT</td><td>1,400</td><td>1</td></tr>
      <tr><td><strong>MOT17/20</strong></td><td>MOT</td><td>14/8</td><td>–ú–Ω–æ–≥–æ</td></tr>
      <tr><td><strong>TAO</strong></td><td>MOT</td><td>2,900</td><td>–ú–Ω–æ–≥–æ –∫–ª–∞—Å—Å–æ–≤</td></tr>
    </table>
  </div>

  <div class="block">
    <h2>üî∑ 15. –ß–µ–∫-–ª–∏—Å—Ç</h2>
    <ul>
      <li>[ ] <strong>–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø</strong>: SOT –∏–ª–∏ MOT</li>
      <li>[ ] <strong>Real-time requirements</strong>: KCF/MOSSE vs DiMP/TransT</li>
      <li>[ ] <strong>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</strong>: —Ö–æ—Ä–æ—à–∏–π bbox –Ω–∞ –ø–µ—Ä–≤–æ–º –∫–∞–¥—Ä–µ</li>
      <li>[ ] <strong>Re-detection</strong> –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ç—Ä–µ–∫–∞</li>
      <li>[ ] <strong>Kalman Filter</strong> –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –≤ MOT</li>
      <li>[ ] <strong>Appearance features</strong> –¥–ª—è association</li>
      <li>[ ] <strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫–∫–ª—é–∑–∏–π</strong>: —Ö—Ä–∞–Ω–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é</li>
      <li>[ ] <strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö</li>
      <li>[ ] <strong>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</strong>: GPU, mixed precision</li>
    </ul>

    <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É:</h3>
    <blockquote>
      ¬´Object tracking ‚Äî —ç—Ç–æ –∫–∞–∫ —Å–ª–µ–¥–∏—Ç—å –≥–ª–∞–∑–∞–º–∏ –∑–∞ –¥–≤–∏–∂—É—â–∏–º—Å—è –æ–±—ä–µ–∫—Ç–æ–º: —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ–±—ä–µ–∫—Ç –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏—â–µ—Ç –µ–≥–æ –≤ –Ω–æ–≤—ã—Ö –∫–∞–¥—Ä–∞—Ö –≤–∏–¥–µ–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω —á–∞—Å—Ç–∏—á–Ω–æ —Å–∫—Ä—ã—Ç –∏–ª–∏ –º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–≤–æ—Ä–æ—Ç¬ª.
    </blockquote>
  </div>

</div>

</body>
</html>
